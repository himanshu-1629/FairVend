<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FairVend - Breaking Barriers to Essential Goods</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
        // Support for dark mode in Tailwind
        tailwind.config = {
          darkMode: 'class',
        }
    </script>
    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        #map {
            height: 500px;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            z-index: 10;
        }
        .leaflet-popup-content-wrapper {
            background-color: #fff;
            color: #333;
        }
        .dark .leaflet-popup-content-wrapper {
            background-color: #1f2937;
            color: #f3f4f6;
        }
        .dark .leaflet-tile-pane {
             filter: brightness(0.6) invert(1) contrast(3) hue-rotate(200deg) saturate(0.3) brightness(0.7);
        }
        /* Style for the user's location marker */
        .user-location-marker {
            filter: hue-rotate(180deg);
        }

        /* --- Creative Header Styles --- */
        .nav-link {
            position: relative;
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: #4f46e5; /* indigo-600 */
        }
        .dark .nav-link:hover {
            color: #818cf8; /* indigo-400 */
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #6366f1; /* indigo-500 */
            transition: width 0.3s ease;
        }
        .dark .nav-link::after {
            background-color: #818cf8; /* indigo-400 */
        }
        .nav-link:hover::after {
            width: 100%;
        }

        .header-transparent {
            background-color: transparent;
        }
        .header-scrolled {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .dark .header-scrolled {
            background-color: rgba(15, 23, 42, 0.9); /* slate-900 */
        }
        .header-scrolled nav {
            padding-top: 0.75rem;    /* py-3 */
            padding-bottom: 0.75rem; /* py-3 */
        }
        
        /* --- Gradient Styles --- */
        .btn-gradient {
            background-size: 100% auto;
            transition: filter 0.3s ease;
        }
        .btn-gradient:hover {
            filter: brightness(110%);
        }
        .btn-gradient-indigo {
             background-image: linear-gradient(to right, #818cf8, #6366f1, #4f46e5);
        }
        .card-gradient-indigo {
            background: linear-gradient(135deg, #ffffff 50%, #eef2ff); /* white to indigo-50 */
        }
        .dark .card-gradient-indigo {
             background: linear-gradient(135deg, #1f2937 50%, #312e81); /* slate-800 to indigo-900 */
        }
        .card-gradient-green {
            background: linear-gradient(135deg, #ffffff 50%, #f0fdf4); /* white to green-50 */
        }
        .dark .card-gradient-green {
             background: linear-gradient(135deg, #1f2937 50%, #14532d); /* slate-800 to green-900 */
        }
        .card-gradient-amber {
            background: linear-gradient(135deg, #ffffff 50%, #fffbeb); /* white to amber-50 */
        }
        .dark .card-gradient-amber {
             background: linear-gradient(135deg, #1f2937 50%, #78350f); /* slate-800 to amber-900 */
        }
        .slider-track {
            transition: transform 0.5s ease-in-out;
        }
    </style>
    <script>
        // Support for dark mode in Tailwind
        tailwind.config = {
          darkMode: 'class',
        }
        // Apply theme from localStorage on initial load to prevent flashing
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
    </script>
</head>
<body class="bg-slate-50 text-slate-800 dark:bg-slate-900 dark:text-slate-200 transition-colors duration-300">
    
    <div id="language-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 max-w-sm w-full text-center">
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white" data-key="chooseLangTitle">Choose Your Language</h3>
            <p class="mt-2 text-slate-600 dark:text-slate-300" data-key="chooseLangSubtitle">Please select your preferred language.</p>
            <div class="mt-6 flex flex-col gap-4">
                <button class="lang-select-btn w-full bg-indigo-600 text-white font-semibold py-3 rounded-lg hover:bg-indigo-700 transition" data-lang="en">English</button>
                <button class="lang-select-btn w-full bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-semibold py-3 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition" data-lang="hi">हिन्दी (Hindi)</button>
                <button class="lang-select-btn w-full bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-semibold py-3 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition" data-lang="ta">தமிழ் (Tamil)</button>
            </div>
        </div>
    </div>


    <header class="header-transparent sticky top-0 z-50 transition-all duration-300">
        <nav class="container mx-auto px-6 py-5 flex justify-between items-center transition-all duration-300">
            <div class="flex-1 flex justify-start">
                <a href="#" class="flex items-center gap-2 text-2xl font-bold">
                    <svg class="w-8 h-8 text-indigo-600 dark:text-indigo-400" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.001 4.52853C14.35 2.42 17.98 2.49 20.2426 4.75736C22.5053 7.02472 22.583 10.6356 20.4786 12.993L11.9999 21.485L3.52138 12.993C1.41705 10.6356 1.49472 7.02472 3.75736 4.75736C6.02 2.49 9.64999 2.42 12.001 4.52853Z"></path></svg>
                    <span class="hidden sm:inline text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-blue-500 dark:from-indigo-400 dark:to-blue-400">FairVend</span>
                </a>
            </div>
            
            <div class="hidden lg:flex items-center space-x-10 text-sm font-medium text-slate-600 dark:text-slate-300">
                <a href="#how-it-works" class="nav-link" data-key="navHowItWorks">How It Works</a>
                <a href="#impact" class="nav-link" data-key="navImpact">Impact</a>
                <a href="#find-machine" id="header-find-machine-btn-desktop" class="nav-link" data-key="navFindMachine">Find Nearest Machine</a>
            </div>

            <div class="flex-1 flex justify-end items-center gap-3 sm:gap-4">
                 <a href="#" id="header-donate-btn" class="donate-trigger bg-indigo-600 text-white font-semibold px-4 sm:px-5 py-2.5 rounded-lg hover:bg-indigo-700 transition-all shadow-sm hover:shadow-md text-sm" data-key="navDonateNow">Donate Now</a>
                
                 <div id="profile-dropdown-container" class="relative hidden">
                    <button id="profile-button" class="p-1.5 rounded-full text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700">
                         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    </button>
                    <div id="profile-dropdown" class="hidden absolute right-0 mt-2 w-64 bg-white dark:bg-slate-800 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50 p-4">
                        <p class="text-sm font-semibold text-slate-800 dark:text-slate-200 truncate" id="profile-username">User Name</p>
                        <p class="text-xs text-slate-500 dark:text-slate-400 truncate mb-3" id="profile-email">user@email.com</p>
                        <div class="border-t border-slate-200 dark:border-slate-700"></div>
                        <a href="#" id="profile-logout-btn" class="block text-center mt-3 w-full bg-red-500 text-white font-semibold py-2 rounded-lg hover:bg-red-600 transition text-sm">Log Out</a>
                    </div>
                </div>

                 <div class="relative">
                    <button id="settings-button" class="p-2 rounded-md text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700">
                         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826 3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    </button>
                    <div id="settings-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50">
                        <div class="px-4 py-2 text-xs font-semibold text-slate-400" data-key="prefLang">Language</div>
                        <a href="#" class="lang-select-btn block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700" data-lang="en">English</a>
                        <a href="#" class="lang-select-btn block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700" data-lang="hi">हिन्दी</a>
                        <a href="#" class="lang-select-btn block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700" data-lang="ta">தமிழ்</a>
                        <div class="border-t border-slate-200 dark:border-slate-700 my-1"></div>
                        <div class="px-4 py-2 text-xs font-semibold text-slate-400" data-key="prefTheme">Theme</div>
                        <div class="flex justify-around py-1">
                            <button id="theme-light-btn" class="theme-select-btn p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700">
                                <svg class="w-5 h-5 text-slate-700 dark:text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                            </button>
                             <button id="theme-dark-btn" class="theme-select-btn p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700">
                                <svg class="w-5 h-5 text-slate-700 dark:text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                            </button>
                        </div>
                    </div>
                </div>

                 <button id="mobile-menu-button" class="lg:hidden text-slate-600 dark:text-slate-300 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden lg:hidden px-6 pb-4">
            <a href="#how-it-works" class="block py-2 text-slate-600 dark:text-slate-300" data-key="navHowItWorks_mobile">How It Works</a>
            <a href="#impact" class="block py-2 text-slate-600 dark:text-slate-300" data-key="navImpact_mobile">Impact</a>
            <a href="#find-machine" id="header-find-machine-btn-mobile" class="block py-2 text-slate-600 dark:text-slate-300" data-key="navFindMachine_mobile">Find Nearest Machine</a>
        </div>
    </header>

    <main>
        <section class="relative bg-slate-800">
            <div class="absolute inset-0">
                <img src="https://images.unsplash.com/photo-1593113598332-cd288d649433?q=80&w=2070&auto=format&fit=crop" alt="A person giving food to someone in need" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-slate-900/70"></div>
            </div>
            <div class="relative container mx-auto px-6 py-24 md:py-40 text-center text-white">
                <div class="flex justify-center items-center gap-4">
                    <div class="bg-white/10 backdrop-blur-sm rounded-full px-4 py-2 text-sm font-medium" data-key="fundedAmount">₹2.5M+ Funded</div>
                    <div class="bg-white/10 backdrop-blur-sm rounded-full px-4 py-2 text-sm font-medium" data-key="livesImpacted">50,000+ Lives Impacted</div>
                </div>
                <h1 class="mt-8 text-4xl md:text-6xl font-extrabold leading-tight">
                    <span data-key="heroTitle1">Breaking</span> <span class="text-amber-400" data-key="heroTitle2">Barriers</span> <span data-key="heroTitle3">to Essential Goods</span>
                </h1>
                <p class="mt-6 max-w-3xl mx-auto text-lg text-slate-300" data-key="heroSubtitle">Color-coded discount cards connecting those in need to affordable essentials. Your donation helps us provide up to 50% discounts at vending machines across the community.</p>
                <div class="mt-10 flex flex-col sm:flex-row justify-center items-center gap-4">
                    <a href="#find-machine" id="find-nearest-btn" class="w-full sm:w-auto btn-gradient btn-gradient-indigo text-white font-semibold px-8 py-3 rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-1" data-key="heroBtnFind">Find Nearest Machine</a>
                    <a href="#" class="donate-trigger w-full sm:w-auto bg-slate-100/20 text-white font-semibold px-8 py-3 rounded-lg hover:bg-slate-100/30 transition-all ring-1 ring-inset ring-white/30 shadow-sm hover:shadow-md" data-key="heroBtnDonate">Make a Donation</a>
                </div>
            </div>
        </section>
        
        <section id="donor-dashboard" class="hidden py-16 bg-white dark:bg-slate-800">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-slate-900 dark:text-white mb-2" data-key="dashboardTitle">Welcome Back, <span id="dashboard-username">Donor</span>!</h2>
                <p class="text-lg text-slate-600 dark:text-slate-300 mb-8" data-key="dashboardSubtitle">Here's our real-time funding status. Your contribution makes a direct impact.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-slate-50 dark:bg-slate-700 p-6 rounded-2xl shadow-lg">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-sm font-semibold text-red-600 dark:text-red-400" data-key="dashboardDeficit">Funding Deficit</span>
                            <svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"></path></svg>
                        </div>
                        <div id="dashboard-deficit" class="text-4xl font-bold text-slate-900 dark:text-white mb-1">₹0</div>
                        <p class="text-slate-500 dark:text-slate-400" data-key="dashboardDeficitDesc">needed to reach our monthly goal.</p>
                    </div>
                    
                    <div class="bg-slate-50 dark:bg-slate-700 p-6 rounded-2xl shadow-lg">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-sm font-semibold text-green-600 dark:text-green-400" data-key="dashboardRaised">Total Raised (This Month)</span>
                            <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                        </div>
                        <div id="dashboard-total-donated" class="text-4xl font-bold text-slate-900 dark:text-white mb-1">₹0</div>
                        <p class="text-slate-500 dark:text-slate-400" data-key="dashboardRaisedDesc">from generous donors like you.</p>
                    </div>
                </div>

                <div class="mt-8">
                    <div class="flex justify-between text-sm font-medium text-slate-600 dark:text-slate-300 mb-1">
                        <span data-key="dashboardProgress">Progress</span>
                        <span id="dashboard-progress-percent">0%</span>
                    </div>
                    <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-4">
                        <div id="dashboard-progress-bar" class="bg-gradient-to-r from-blue-500 to-indigo-600 h-4 rounded-full transition-all duration-500" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </section>
        <section id="impact" class="py-20 md:py-28 bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-800/50">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white" data-key="impactTitle">Our Collective Impact</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-slate-600 dark:text-slate-300" data-key="impactSubtitle">Transparency is at the heart of what we do. See how your contributions are making a tangible difference in real-time.</p>
                </div>
                <div class="max-w-4xl mx-auto mt-16 grid grid-cols-1 md:grid-cols-2 gap-8 text-center">
                    <div class="bg-slate-100 dark:bg-slate-800 p-8 rounded-2xl">
                        <div class="text-5xl font-extrabold text-indigo-600 dark:text-indigo-400" data-key="impactFundsAmount">₹2.5M+</div>
                        <div class="mt-2 text-lg font-semibold text-slate-700 dark:text-slate-300" data-key="impactFundsTitle">Total Funds Raised</div>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="impactFundsDesc">From thousands of generous donors across the country.</p>
                    </div>
                     <div class="bg-slate-100 dark:bg-slate-800 p-8 rounded-2xl">
                        <div class="text-5xl font-extrabold text-green-600 dark:text-green-400" data-key="impactPeopleAmount">50,000+</div>
                        <div class="mt-2 text-lg font-semibold text-slate-700 dark:text-slate-300" data-key="impactPeopleTitle">Individuals Supported</div>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="impactPeopleDesc">Provided with essential goods through our vending network.</p>
                    </div>
                </div>

                <div class="mt-20">
                    <h3 class="text-2xl md:text-3xl font-bold text-center text-slate-900 dark:text-white" data-key="testimonialsTitle">Stories from Our Community</h3>
                    <div class="relative max-w-2xl mx-auto mt-8">
                        <div class="overflow-hidden">
                            <div id="slider-track" class="flex slider-track">
                                <div class="w-full flex-shrink-0 px-4">
                                    <div class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg text-center">
                                        <div class="text-amber-400 flex justify-center gap-1 mb-4">
                                            <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                        </div>
                                        <p class="text-slate-600 dark:text-slate-300 italic" id="testimonial1Text"></p>
                                        <div class="mt-4 font-bold text-slate-800 dark:text-slate-100" id="testimonial1Name"></div>
                                    </div>
                                </div>
                                <div class="w-full flex-shrink-0 px-4">
                                     <div class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg text-center">
                                        <div class="text-amber-400 flex justify-center gap-1 mb-4">
                                            <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                        </div>
                                        <p class="text-slate-600 dark:text-slate-300 italic" id="testimonial2Text"></p>
                                        <div class="mt-4 font-bold text-slate-800 dark:text-slate-100" id="testimonial2Name"></div>
                                    </div>
                                </div>
                                <div class="w-full flex-shrink-0 px-4">
                                     <div class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg text-center">
                                        <div class="text-amber-400 flex justify-center gap-1 mb-4">
                                            <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                        </div>
                                        <p class="text-slate-600 dark:text-slate-300 italic" id="testimonial3Text"></p>
                                        <div class="mt-4 font-bold text-slate-800 dark:text-slate-100" id="testimonial3Name"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button id="prev-slide" class="absolute top-1/2 -translate-y-1/2 left-0 -translate-x-12 p-2 rounded-full bg-white/50 dark:bg-slate-700/50 hover:bg-white dark:hover:bg-slate-700 transition">
                            <svg class="w-6 h-6 text-slate-700 dark:text-slate-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                        </button>
                         <button id="next-slide" class="absolute top-1/2 -translate-y-1/2 right-0 translate-x-12 p-2 rounded-full bg-white/50 dark:bg-slate-700/50 hover:bg-white dark:hover:bg-slate-700 transition">
                            <svg class="w-6 h-6 text-slate-700 dark:text-slate-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </button>
                    </div>
                </div>

            </div>
        </section>

        <section id="how-it-works" class="py-20 md:py-28">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white" data-key="howTitle">A Simple System for a Big Impact</h2>
                <p class="mt-4 max-w-2xl mx-auto text-slate-600 dark:text-slate-300" data-key="howSubtitle">We believe in direct, transparent, and dignified support. Here’s how our color-coded discount system works.</p>
                <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-10 md:gap-8">
                    <div class="card-gradient-indigo p-8 rounded-2xl shadow-lg hover:shadow-xl dark:hover:shadow-indigo-500/10 transition-shadow transform hover:-translate-y-2">
                        <div class="bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 w-16 h-16 rounded-full flex items-center justify-center mx-auto">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
                        </div>
                        <h3 class="mt-6 text-xl font-bold dark:text-white" data-key="howStep1Title">Get Your Card</h3>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="howStep1Desc">In partnership with local NGOs, we distribute FairVend cards. Each color represents a different level of support.</p>
                    </div>
                    <div class="card-gradient-green p-8 rounded-2xl shadow-lg hover:shadow-xl dark:hover:shadow-green-500/10 transition-shadow transform hover:-translate-y-2">
                        <div class="bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 w-16 h-16 rounded-full flex items-center justify-center mx-auto">
                             <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                        </div>
                        <h3 class="mt-6 text-xl font-bold dark:text-white" data-key="howStep2Title">Scan the Color</h3>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="howStep2Desc">Simply show your card to the vending machine's scanner. Our system instantly recognizes and applies the discount.</p>
                    </div>
                    <div class="card-gradient-amber p-8 rounded-2xl shadow-lg hover:shadow-xl dark:hover:shadow-amber-500/10 transition-shadow transform hover:-translate-y-2">
                        <div class="bg-amber-100 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400 w-16 h-16 rounded-full flex items-center justify-center mx-auto">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M12 6h.01M6 12h.01M18 12h.01M7 7h.01M17 7h.01M7 17h.01M17 17h.01"></path></svg>
                        </div>
                        <h3 class="mt-6 text-xl font-bold dark:text-white" data-key="howStep3Title">Receive Your Discount</h3>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="howStep3Desc">Your discount is funded by generous donors, providing essential items at a more affordable price.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="find-machine" class="py-20 md:py-28 bg-gradient-to-b from-white to-indigo-50 dark:from-slate-900 dark:to-slate-800/50">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white" data-key="findTitle">Find a FairVend Machine Near You</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-slate-600 dark:text-slate-300" data-key="findSubtitle">Enter your area or city to locate the closest machine and get directions.</p>
                </div>
                <div class="max-w-4xl mx-auto mt-12">
                    <div class="flex flex-col sm:flex-row gap-4 mb-6">
                        <input id="location-input" type="text" data-key-placeholder="findPlaceholder" placeholder="e.g., 'Mumbai' or 'Connaught Place, Delhi'" class="flex-grow w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition bg-white dark:bg-slate-800">
                        <button id="search-btn" class="w-full sm:w-auto bg-indigo-600 text-white font-semibold px-8 py-3 rounded-lg hover:bg-indigo-700 transition-all shadow-sm hover:shadow-md" data-key="findBtnSearch">Search</button>
                    </div>
                    <p id="search-status" class="text-center text-slate-500 dark:text-slate-400 min-h-[1.5rem]"></p>
                    <div id="map" class="mt-4"></div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-800 text-slate-300 pt-16 pb-8">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 md:gap-8">
                <div class="md:col-span-2 lg:col-span-1">
                    <a href="#" class="flex items-center gap-2 text-2xl font-bold text-white">
                        <svg class="w-8 h-8 text-indigo-400" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.001 4.52853C14.35 2.42 17.98 2.49 20.2426 4.75736C22.5053 7.02472 22.583 10.6356 20.4786 12.993L11.9999 21.485L3.52138 12.993C1.41705 10.6356 1.49472 7.02472 3.75736 4.75736C6.02 2.49 9.64999 2.42 12.001 4.52853Z"></path></svg>
                        <span>FairVend</span>
                    </a>
                    <p class="mt-4 text-slate-400 text-sm max-w-xs" data-key="footerDesc">Fair access to essential goods through community-powered discounts.</p>
                </div>

                <div>
                    <h3 class="font-semibold text-white tracking-wider" data-key="footerQuickLinks">Quick Links</h3>
                    <ul class="mt-4 space-y-3 text-sm">
                        <li><a href="#how-it-works" class="text-slate-400 hover:text-white transition-colors" data-key="footerLinkHow">How It Works</a></li>
                        <li><a href="#find-machine" class="text-slate-400 hover:text-white transition-colors" data-key="footerLinkFind">Find Machine</a></li>
                        <li><a href="#" class="donate-trigger text-slate-400 hover:text-white transition-colors" data-key="footerLinkDonate">Donate</a></li>
                        <li><a href="#impact" class="text-slate-400 hover:text-white transition-colors" data-key="footerLinkImpact">Our Impact</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="font-semibold text-white tracking-wider" data-key="footerContact">Contact</h3>
                    <ul class="mt-4 space-y-3 text-sm">
                        <li class="flex items-start gap-3">
                            <svg class="w-5 h-5 mt-0.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                            <a href="mailto:help@fairvend.org" class="text-slate-400 hover:text-white transition-colors" data-key="footerEmail">help@fairvend.org</a>
                        </li>
                         <li class="flex items-start gap-3">
                            <svg class="w-5 h-5 mt-0.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                            <span class="text-slate-400" data-key="footerPhone">+91 1800-123-4567</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <svg class="w-5 h-5 mt-0.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                            <span class="text-slate-400" data-key="footerLocation">Bangalore, India</span>
                        </li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="font-semibold text-white tracking-wider" data-key="footerUpdates">Get Impact Updates</h3>
                    <form class="mt-4 flex">
                        <input type="email" data-key-placeholder="footerEmailPlaceholder" placeholder="your@email.com" class="w-full rounded-l-md border-0 py-2.5 px-3 text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-inset focus:ring-indigo-500 text-sm">
                        <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-4 rounded-r-md transition-colors text-sm" data-key="footerSubscribe">Subscribe</button>
                    </form>
                    <div class="mt-4 flex gap-4">
                        <div class="bg-slate-700 text-slate-300 text-xs font-semibold px-3 py-1.5 rounded-md" data-key="footerTagTransparent">100% Transparent</div>
                    </div>
                </div>
            </div>

            <hr class="my-8 border-slate-700">

            <div class="text-center text-sm text-slate-400">
                <span data-key="footerRights">© 2025 FairVend. All rights reserved.</span>
                <span class="mx-2">|</span>
                <span data-key="footerSlogan">Making essential goods accessible to everyone.</span>
            </div>
        </div>
    </footer>
    
    <div id="auth-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 transition-opacity duration-300">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md transform transition-transform duration-300 scale-95">
            <div class="relative p-8">
                <button id="auth-close-btn" class="absolute top-4 right-4 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                
                <div id="auth-view">
                    <div class="mb-6">
                        <div class="flex border-b border-slate-200 dark:border-slate-700">
                            <button id="login-tab" class="auth-tab flex-1 py-3 font-semibold text-sm border-b-2 border-indigo-500 text-indigo-600 dark:text-indigo-400">Log In</button>
                            <button id="signup-tab" class="auth-tab flex-1 py-3 font-semibold text-sm border-b-2 border-transparent text-slate-500 dark:text-slate-400">Sign Up</button>
                        </div>
                    </div>
                    
                    <div id="login-form">
                        <div id="login-notification" class="hidden text-sm text-center p-2 mb-4 rounded-md"></div>
                        <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-1">Welcome Back!</h3>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mb-6">Log in to continue your support.</p>
                        <form id="login-form-element">
                            <div class="space-y-4">
                                <div>
                                    <label for="login-email" class="block text-sm font-medium text-slate-700 dark:text-slate-300">Email</label>
                                    <input type="email" id="login-email" class="mt-1 block w-full rounded-md border-slate-300 dark:border-slate-600 py-2.5 px-4 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" placeholder="you@example.com" required>
                                </div>
                                <div>
                                    <label for="login-password" class="block text-sm font-medium text-slate-700 dark:text-slate-300">Password</label>
                                    <input type="password" id="login-password" class="mt-1 block w-full rounded-md border-slate-300 dark:border-slate-600 py-2.5 px-4 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" placeholder="••••••••" required>
                                </div>
                            </div>
                            <button type="submit" class="mt-6 w-full bg-indigo-600 text-white font-bold py-3 rounded-lg hover:bg-indigo-700 transition">Log In</button>
                        </form>
                    </div>

                    <div id="signup-form" class="hidden">
                        <div id="signup-notification" class="hidden text-sm text-center p-2 mb-4 rounded-md"></div>
                        <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-1">Join FairVend</h3>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mb-6">Create an account to start donating.</p>
                        <form id="signup-form-element">
                            <div class="space-y-4">
                                <div>
                                    <label for="signup-name" class="block text-sm font-medium text-slate-700 dark:text-slate-300">Full Name</label>
                                    <input type="text" id="signup-name" class="mt-1 block w-full rounded-md border-slate-300 dark:border-slate-600 py-2.5 px-4 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" placeholder="Priya Sharma" required>
                                </div>
                                <div>
                                    <label for="signup-email" class="block text-sm font-medium text-slate-700 dark:text-slate-300">Email</label>
                                    <input type="email" id="signup-email" class="mt-1 block w-full rounded-md border-slate-300 dark:border-slate-600 py-2.5 px-4 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" placeholder="you@example.com" required>
                                </div>
                                <div>
                                    <label for="signup-password" class="block text-sm font-medium text-slate-700 dark:text-slate-300">Password</label>
                                    <input type="password" id="signup-password" class="mt-1 block w-full rounded-md border-slate-300 dark:border-slate-600 py-2.5 px-4 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" placeholder="Create a strong password" required>
                                </div>
                            </div>
                            <button type="submit" class="mt-6 w-full bg-indigo-600 text-white font-bold py-3 rounded-lg hover:bg-indigo-700 transition">Create Account</button>
                        </form>
                    </div>
                    
                </div>
                <div id="donation-view" class="hidden">
                    <div class="flex justify-between items-center mb-4">
                        <div>
                            <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-1">Support Our Mission</h3>
                            <p class="text-sm text-slate-500 dark:text-slate-400">Welcome, <span id="donor-welcome-name" class="font-semibold">Donor</span>!</p>
                        </div>
                        <button id="logout-btn" class="text-sm font-semibold text-indigo-600 dark:text-indigo-400 hover:underline">Log Out</button>
                    </div>
                    <form id="modal-donation-form">
                        <p class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Select an amount</p>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                            <button type="button" class="donation-amount-btn border border-slate-300 dark:border-slate-600 rounded-lg py-3 text-lg font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition" data-amount="100">₹100</button>
                            <button type="button" class="donation-amount-btn border border-slate-300 dark:border-slate-600 rounded-lg py-3 text-lg font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition" data-amount="250">₹250</button>
                            <button type="button" class="donation-amount-btn border border-slate-300 dark:border-slate-600 rounded-lg py-3 text-lg font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition" data-amount="500">₹500</button>
                            <button type="button" class="donation-amount-btn border border-slate-300 dark:border-slate-600 rounded-lg py-3 text-lg font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition" data-amount="1000">₹1000</button>
                        </div>
                        <div class="mt-6">
                            <label for="modal-custom-amount" class="block text-sm font-medium text-slate-700 dark:text-slate-300">Or enter a custom amount</label>
                            <div class="mt-1 relative rounded-md shadow-sm">
                                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                                    <span class="text-slate-500 sm:text-sm">₹</span>
                                </div>
                                <input type="number" name="custom-amount" id="modal-custom-amount" class="block w-full rounded-md border-slate-300 dark:border-slate-600 pl-7 pr-12 py-3 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" placeholder="0.00">
                            </div>
                        </div>
                        <button type="submit" class="mt-8 w-full bg-green-600 text-white text-lg font-bold py-3 rounded-lg shadow-md hover:bg-green-700 transition">Donate Securely</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
     <div id="thank-you-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[110] p-4">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 max-w-sm w-full text-center transform transition-all scale-95 opacity-0">
            <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/50">
                <svg class="h-6 w-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
            </div>
            <h3 class="text-2xl font-bold mt-4 text-slate-900 dark:text-white" data-key="modalThankYou">Thank You!</h3>
            <p id="thank-you-message" class="mt-2 text-slate-600 dark:text-slate-300" data-key="modalMessage">Your generous donation will make a real difference.</p>
            <button id="close-modal-btn" class="mt-6 w-full bg-indigo-600 text-white font-semibold py-2 rounded-lg hover:bg-indigo-700 transition" data-key="modalClose">Close</button>
        </div>
    </div>

    <script type="module">
        // --- Firebase SDK Imports ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
        import { 
            getAuth, 
            onAuthStateChanged, 
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            updateProfile,
            signOut
        } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";
        // --- NEW: Import Firestore ---
        import { 
            getFirestore, 
            doc, 
            onSnapshot, 
            runTransaction,
            setDoc,
            increment
        } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";

        // --- Translations Object (Including all necessary keys) ---
        const translations = {
            en: {
                // Header/Navigation/Prefs
                chooseLangTitle: "Choose Your Language",
                chooseLangSubtitle: "Please select your preferred language.",
                navHowItWorks: "How It Works",
                navImpact: "Impact",
                navFindMachine: "Find Nearest Machine",
                navDonateNow: "Donate Now",
                prefLang: "Language",
                prefTheme: "Theme",
                navHowItWorks_mobile: "How It Works", // Mobile Keys
                navImpact_mobile: "Impact",
                navFindMachine_mobile: "Find Nearest Machine",
                
                // Hero Section
                fundedAmount: "₹2.5M+ Funded",
                livesImpacted: "50,000+ Lives Impacted",
                heroTitle1: "Breaking",
                heroTitle2: "Barriers",
                heroTitle3: "to Essential Goods",
                heroSubtitle: "Color-coded discount cards connecting those in need to affordable essentials. Your donation helps us provide up to 50% discounts at vending machines across the community.",
                heroBtnFind: "Find Nearest Machine",
                heroBtnDonate: "Make a Donation",

                // Dashboard
                dashboardTitle: "Welcome Back, ",
                dashboardSubtitle: "Here's our real-time funding status. Your contribution makes a direct impact.",
                dashboardDeficit: "Funding Deficit",
                dashboardDeficitDesc: "needed to reach our monthly goal.",
                dashboardRaised: "Total Raised (This Month)",
                dashboardRaisedDesc: "from generous donors like you.",
                dashboardProgress: "Progress",

                // Impact Section
                impactTitle: "Our Collective Impact",
                impactSubtitle: "Transparency is at the heart of what we do. See how your contributions are making a tangible difference in real-time.",
                impactFundsAmount: "₹2.5M+",
                impactFundsTitle: "Total Funds Raised",
                impactFundsDesc: "From thousands of generous donors across the country.",
                impactPeopleAmount: "50,000+",
                impactPeopleTitle: "Individuals Supported",
                impactPeopleDesc: "Provided with essential goods through our vending network.",

                // Testimonials (DYNAMIC CONTENT)
                testimonialsTitle: "Stories from Our Community",
                testimonial1Text: "As a student, every rupee matters. The FairVend card has been a blessing, helping me buy snacks and essentials without worrying. It feels like someone cares.",
                testimonial1Name: "- Ananya, Student from Mumbai",
                testimonial2Text: "After a long day of work, having access to affordable drinks and sanitary products for my daughter is a huge relief. Thank you, FairVend, for your support.",
                testimonial2Name: "- Rajesh, Worker from Delhi",
                testimonial3Text: "The dignity this program provides is immeasurable. Getting essentials for my family without feeling like I'm asking for a handout has made all the difference.",
                testimonial3Name: "- Priya, Mother from Chennai",
                
                // How It Works
                howTitle: "A Simple System for a Big Impact",
                howSubtitle: "We believe in direct, transparent, and dignified support. Here’s how our color-coded discount system works.",
                howStep1Title: "Get Your Card",
                howStep1Desc: "In partnership with local NGOs, we distribute FairVend cards. Each color represents a different level of support.",
                howStep2Title: "Scan the Color",
                howStep2Desc: "Simply show your card to the vending machine's scanner. Our system instantly recognizes and applies the discount.",
                howStep3Title: "Receive Your Discount",
                howStep3Desc: "Your discount is funded by generous donors, providing essential items at a more affordable price.",
                
                // Find Machine
                findTitle: "Find a FairVend Machine Near You",
                findSubtitle: "Enter your area or city to locate the closest machine and get directions.",
                findPlaceholder: "e.g., 'Mumbai' or 'Connaught Place, Delhi'",
                findBtnSearch: "Search",

                // Footer
                footerDesc: "Fair access to essential goods through community-powered discounts.",
                footerQuickLinks: "Quick Links",
                footerLinkHow: "How It Works",
                footerLinkFind: "Find Machine",
                footerLinkDonate: "Donate",
                footerLinkImpact: "Our Impact",
                footerContact: "Contact",
                footerEmail: "help@fairvend.org",
                footerPhone: "+91 1800-123-4567",
                footerLocation: "Bangalore, India",
                footerUpdates: "Get Impact Updates",
                footerEmailPlaceholder: "your@email.com",
                footerSubscribe: "Subscribe",
                footerTagTransparent: "100% Transparent",
                footerRights: "© 2025 FairVend. All rights reserved.",
                footerSlogan: "Making essential goods accessible to everyone.",

                // Modals
                modalThankYou: "Thank You!",
                modalMessage: "Your generous donation will make a real difference.",
                modalClose: "Close",
            },
            hi: {
                // Header/Navigation/Prefs
                chooseLangTitle: "अपनी भाषा चुनें",
                chooseLangSubtitle: "कृपया अपनी पसंदीदा भाषा चुनें।",
                navHowItWorks: "यह कैसे काम करता है",
                navImpact: "प्रभाव",
                navFindMachine: "नजदीकी मशीन ढूंढें",
                navDonateNow: "अभी दान करें",
                prefLang: "भाषा",
                prefTheme: "थीम",
                navHowItWorks_mobile: "यह कैसे काम करता है",
                navImpact_mobile: "प्रभाव",
                navFindMachine_mobile: "नजदीकी मशीन ढूंढें",

                // Hero Section
                fundedAmount: "₹2.5M+ वित्त पोषित",
                livesImpacted: "50,000+ जीवन प्रभावित",
                heroTitle1: "आवश्यक",
                heroTitle2: "सामानों",
                heroTitle3: "की बाधाओं को तोड़ना",
                heroSubtitle: "ज़रूरतमंदों को किफ़ायती ज़रूरी चीज़ों से जोड़ने वाले कलर-कोडेड डिस्काउंट कार्ड। आपका दान हमें समुदाय भर में वेंडिंग मशीनों पर 50% तक की छूट प्रदान करने में मदद करता है।",
                heroBtnFind: "नजदीकी मशीन ढूंढें",
                heroBtnDonate: "दान करें",

                // Dashboard
                dashboardTitle: "वापसी पर स्वागत है, ",
                dashboardSubtitle: "यहां हमारी रीयल-टाइम फंडिंग स्थिति है। आपका योगदान सीधा प्रभाव डालता है।",
                dashboardDeficit: "फंडिंग घाटा",
                dashboardDeficitDesc: "हमारे मासिक लक्ष्य तक पहुँचने के लिए आवश्यक है।",
                dashboardRaised: "कुल जुटाई गई (इस महीने)",
                dashboardRaisedDesc: "आप जैसे उदार दाताओं से।",
                dashboardProgress: "प्रगति",

                // Impact Section
                impactTitle: "हमारा सामूहिक प्रभाव",
                impactSubtitle: "पारदर्शिता हमारे काम के केंद्र में है। देखें कि आपका योगदान वास्तविक समय में कैसे tangible फर्क ला रहा है।",
                impactFundsAmount: "₹2.5M+",
                impactFundsTitle: "कुल जुटाए गए फंड",
                impactFundsDesc: "देश भर के हजारों उदार दाताओं से।",
                impactPeopleAmount: "50,000+",
                impactPeopleTitle: "समर्थित व्यक्ति",
                impactPeopleDesc: "हमारे वेंडिंग नेटवर्क के माध्यम से आवश्यक वस्तुएं प्रदान की गईं।",
                
                // Testimonials (DYNAMIC CONTENT)
                testimonialsTitle: "हमारे समुदाय की कहानियाँ",
                testimonial1Text: "एक छात्र के रूप में, हर रुपया मायने रखता है। फेयरवेंड कार्ड एक वरदान रहा है, जिससे मुझे बिना चिंता किए स्नैक्स और आवश्यक सामान खरीदने में मदद मिली है। ऐसा लगता है कि कोई परवाह करता है।",
                testimonial1Name: "- अनन्या, मुंबई से छात्र",
                testimonial2Text: "एक लंबे दिन के काम के बाद, मेरी बेटी के लिए सस्ती ड्रिंक और सैनिटरी उत्पाद मिलना एक बड़ी राहत है। आपके समर्थन के लिए धन्यवाद, फेयरवेंड।",
                testimonial2Name: "- राजेश, दिल्ली से कार्यकर्ता",
                testimonial3Text: "यह कार्यक्रम जो गरिमा प्रदान करता है, वह अतुलनीय है। यह महसूस किए बिना कि मैं मदद मांग रहा हूं, अपने परिवार के लिए आवश्यक चीजें प्राप्त करने से बहुत फर्क पड़ा है।",
                testimonial3Name: "- प्रिया, चेन्नई से माँ",

                // How It Works
                howTitle: "एक बड़े प्रभाव के लिए एक सरल प्रणाली",
                howSubtitle: "हम प्रत्यक्ष, पारदर्शी और गरिमापूर्ण समर्थन में विश्वास करते हैं। यहां बताया गया है कि हमारी कलर-कोडेड डिस्काउंट प्रणाली कैसे काम करती है।",
                howStep1Title: "अपना कार्ड प्राप्त करें",
                howStep1Desc: "स्थानीय गैर सरकारी संगठनों के साथ साझेदारी में, हम फेयरवेंड कार्ड वितरित करते हैं। प्रत्येक रंग समर्थन के एक अलग स्तर का प्रतिनिधित्व करता है।",
                howStep2Title: "रंग को स्कैन करें",
                howStep2Desc: "बस वेंडिंग मशीन के स्कैनर को अपना कार्ड दिखाएं। हमारा सिस्टम तुरंत छूट को पहचानता है और लागू करता ہے۔",
                howStep3Title: "अपनी छूट प्राप्त करें",
                howStep3Desc: "आपकी छूट उदार दाताओं द्वारा वित्त पोषित है, जो आवश्यक वस्तुओं को अधिक किफायती मूल्य पर प्रदान करती है।",

                // Find Machine
                findTitle: "अपने पास एक फेयरवेंड मशीन ढूंढें",
                findSubtitle: "नजदीकी मशीन का पता लगाने और दिशा-निर्देश प्राप्त करने के लिए अपना क्षेत्र या शहर दर्ज करें۔",
                findPlaceholder: "उदा., 'मुंबई' या 'कनॉट प्लेस, दिल्ली'",
                findBtnSearch: "खोजें",
                
                // Footer
                footerDesc: "समुदाय-संचालित छूट के माध्यम से आवश्यक वस्तुओं तक उचित पहुंच۔",
                footerQuickLinks: "त्वरित लिंक",
                footerLinkHow: "यह कैसे काम करता है",
                footerLinkFind: "मशीन ढूंढें",
                footerLinkDonate: "दान करें",
                footerLinkImpact: "हमारा प्रभाव",
                footerContact: "संपर्क",
                footerEmail: "help@fairvend.org",
                footerPhone: "+91 1800-123-4567",
                footerLocation: "बैंगलोर, भारत",
                footerUpdates: "प्रभाव अपडेट प्राप्त करें",
                footerEmailPlaceholder: "आपका@ईमेल.कॉम",
                footerSubscribe: "सदस्यता लें",
                footerTagTransparent: "100% पारदर्शी",
                footerRights: "© 2025 फेयरवेंड۔ सभी अधिकार सुरक्षित۔",
                footerSlogan: "आवश्यक वस्तुओं को सभी के लिए सुलभ बनाना۔",

                // Modals
                modalThankYou: "धन्यवाद!",
                modalMessage: "आपका उदार दान वास्तव में बदलाव लाएगा۔",
                modalClose: "बंद करें",
            },
            ta: {
                // Header/Navigation/Prefs
                chooseLangTitle: "உங்கள் மொழியைத் தேர்ந்தெடுக்கவும்",
                chooseLangSubtitle: "உங்கள் விருப்பமான மொழியைத் தேர்ந்தெடுக்கவும்。",
                navHowItWorks: "செயல்படும் விதம்",
                navImpact: "தாக்கம்",
                navFindMachine: "அருகிலுள்ள இயந்திரத்தைக் கண்டறியவும்",
                navDonateNow: "இப்போது நன்கொடை",
                prefLang: "மொழி",
                prefTheme: "தீம்",
                navHowItWorks_mobile: "செயல்படும் விதம்",
                navImpact_mobile: "தாக்கம்",
                navFindMachine_mobile: "அருகிலுள்ள இயந்திரத்தைக் கண்டறியவும்",

                // Hero Section
                fundedAmount: "₹2.5M+ நிதியளிப்பு",
                livesImpacted: "50,000+ உயிர்கள் பாதிக்கப்பட்டன",
                heroTitle1: "அத்தியாவசிய",
                heroTitle2: "பொருட்களுக்கான",
                heroTitle3: "தடைகளை உடைத்தல்",
                heroSubtitle: "தேவைப்படுபவர்களை மலிவு விலையில் அத்தியாவசியப் பொருட்களுடன் இணைக்கும் வண்ண-குறியிடப்பட்ட தள்ளுபடி அட்டைகள். சமூகத்தில் உள்ள விற்பனை இயந்திரங்களில் 50% வரை தள்ளுபடி வழங்க உங்கள் நன்கொடை எங்களுக்கு உதவுகிறது。",
                heroBtnFind: "அருகிலுள்ள இயந்திரத்தைக் கண்டறியவும்",
                heroBtnDonate: "நன்கொடை அளியுங்கள்",

                // Dashboard
                dashboardTitle: "மீண்டும் வருக, ",
                dashboardSubtitle: "எங்கள் நிகழ்நேர நிதி நிலை இங்கே. உங்கள் பங்களிப்பு நேரடி தாக்கத்தை ஏற்படுத்துகிறது。",
                dashboardDeficit: "நிதிப் பற்றாக்குறை",
                dashboardDeficitDesc: "எங்கள் மாதாந்திர இலக்கை அடையத் தேவை。",
                dashboardRaised: "மொத்தம் திரட்டப்பட்டது (இந்த மாதம்)",
                dashboardRaisedDesc: "உங்களைப் போன்ற தாராளமான நன்கொடையாளர்களிடமிருந்து。",
                dashboardProgress: "முன்னேற்றம்",

                // Impact Section
                impactTitle: "எங்கள் கூட்டு தாக்கம்",
                impactSubtitle: "வெளிப்படைத்தன்மை எங்கள் செயல்பாட்டின் மையத்தில் உள்ளது. உங்கள் பங்களிப்புகள் உண்மையான நேரத்தில் எவ்வாறு உறுதியான மாற்றத்தை ஏற்படுத்துகின்றன என்பதைப் பாருங்கள்。",
                impactFundsAmount: "₹2.5M+",
                impactFundsTitle: "மொத்தமாக திரட்டப்பட்ட நிதிகள்",
                impactFundsDesc: "நாடு முழுவதும் உள்ள ஆயிரக்கணக்கான தாராளமான நன்கொடையாளர்களிடமிருந்து。",
                impactPeopleAmount: "50,000+",
                impactPeopleTitle: "ஆதரவளிக்கப்பட்ட தனிநபர்கள்",
                impactPeopleDesc: "எங்கள் விற்பனை இயந்திர வலையமைப்பு மூலம் அத்தியாவசியப் பொருட்கள் வழங்கப்பட்டன。",
                
                // Testimonials (DYNAMIC CONTENT)
                testimonialsTitle: "எங்கள் சமூகத்திலிருந்து கதைகள்",
                testimonial1Text: "ஒரு மாணவியாக, ஒவ்வொரு ரூபாயும் முக்கியமானது. FairVend அட்டை ஒரு வரப்பிரசாதமாக உள்ளது, கவலைப்படாமல் சிற்றுண்டி மற்றும் அத்தியாவசியப் பொருட்களை வாங்க உதவுகிறது. யாரோ அக்கறை கொள்கிறார்கள் போல் உணர்கிறேன்。",
                testimonial1Name: "- அனன்யா, மும்பை மாணவி",
                testimonial2Text: "நீண்ட நாள் வேலைக்குப் பிறகு, என் மகளுக்கு மலிவு விலையில் பானங்கள் மற்றும் சுகாதாரப் பொருட்களை அணுகுவது பெரிய நிம்மதி. உங்கள் ஆதரவுக்கு நன்றி, FairVend。",
                testimonial2Name: "- ராஜேஷ், டெல்லி தொழிலாளி",
                testimonial3Text: "இந்த திட்டம் வழங்கும் கண்ணியம் அளவிட முடியாதது. யாசகம் கேட்பது போல் உணராமல் என் குடும்பத்திற்கு அத்தியாவசியப் பொருட்களைப் பெறுவது அனைத்து வித்தியாசத்தையும் ஏற்படுத்தியுள்ளது。",
                testimonial3Name: "- பிரியா, சென்னை தாய்",

                // How It Works
                howTitle: "ஒரு பெரிய தாக்கத்திற்கான ஒரு எளிய அமைப்பு",
                howSubtitle: "நேரடியான, வெளிப்படையான மற்றும் கண்ணியமான ஆதரவில் நாங்கள் நம்புகிறோம். எங்கள் வண்ண-குறியிடப்பட்ட தள்ளுபடி அமைப்பு எவ்வாறு செயல்படுகிறது என்பது இங்கே。",
                howStep1Title: "உங்கள் அட்டையைப் பெறுங்கள்",
                howStep1Desc: "உள்ளூர் தன்னார்வ தொண்டு நிறுவனங்களுடன் இணைந்து, நாங்கள் FairVend அட்டைகளை விநியோகிக்கிறோம். ஒவ்வொரு நிறமும் வெவ்வேறு நிலை ஆதரவைக் குறிக்கிறது。",
                howStep2Title: "நிறத்தை ஸ்கேன் செய்யுங்கள்",
                howStep2Desc: "விற்பனை இயந்திரத்தின் ஸ்கேனரில் உங்கள் அட்டையைக் காட்டினால் போதும். எங்கள் அமைப்பு உடனடியாகத் தள்ளுபடியை அடையாளம் கண்டு பயன்படுத்துகிறது。",
                howStep3Title: "உங்கள் தள்ளுபடியைப் பெறுங்கள்",
                howStep3Desc: "உங்கள் தள்ளுபடி தாராளமான நன்கொடையாளர்களால் நிதியளிக்கப்படுகிறது, அத்தியாவசியப் பொருட்களை மிகவும் மலிவு விலையில் வழங்குகிறது。",

                // Find Machine
                findTitle: "உங்களுக்கு அருகில் உள்ள FairVend இயந்திரத்தைக் கண்டறியவும்",
                findSubtitle: "அருகிலுள்ள இயந்திரத்தைக் கண்டறிந்து திசைகளைப் பெற உங்கள் பகுதி அல்லது நகரத்தை உள்ளிடவும்。",
                findPlaceholder: "எ.கா., 'மும்பை' அல்லது 'கன்னாட் பிளேஸ், டெல்லி'",
                findBtnSearch: "தேடல்",

                // Footer
                footerDesc: "சமூகத்தால் இயக்கப்படும் தள்ளுபடிகள் மூலம் அத்தியாவசியப் பொருட்களுக்கு நியாயமான அணுகல்。",
                footerQuickLinks: "விரைவு இணைப்புகள்",
                footerLinkHow: "செயல்படும் விதம்",
                footerLinkFind: "இயந்திரத்தைக் கண்டறியவும்",
                footerLinkDonate: "நன்கொடை",
                footerLinkImpact: "எங்கள் தாக்கம்",
                footerContact: "தொடர்பு",
                footerEmail: "help@fairvend.org",
                footerPhone: "+91 1800-123-4567",
                footerLocation: "பெங்களூர், இந்தியா",
                footerUpdates: "தாக்க புதுப்பிப்புகளைப் பெறுங்கள்",
                footerEmailPlaceholder: "உங்கள்@மின்னஞ்சல்.காம்",
                footerSubscribe: "சந்தா செலுத்துங்கள்",
                footerTagTransparent: "100% வெளிப்படையானது",
                footerRights: "© 2025 FairVend. அனைத்து உரிமைகளும் பாதுகாக்கப்பட்டவை。",
                footerSlogan: "அத்தியாவசியப் பொருட்களை அனைவருக்கும் அணுகும்படி செய்தல்。",

                // Modals
                modalThankYou: "நன்றி!",
                modalMessage: "உங்கள் தாராளமான நன்கொடை ஒரு உண்மையான மாற்றத்தை ஏற்படுத்தும்。",
                modalClose: "மூடு",
            }
        };

        // --- Language Setter Function (Ensures all dynamic content is updated) ---
        function setLanguage(lang) {
            if (!translations[lang]) {
                console.warn(`Language '${lang}' not found. Defaulting to 'en'.`);
                lang = 'en';
            }
            
            // Save preference to localStorage
            localStorage.setItem('preferredLang', lang);

            // Set HTML lang attribute
            document.documentElement.lang = lang;

            // Update all text elements with data-key
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                const translation = translations[lang][key];
                if (translation) {
                    el.textContent = translation;
                } else {
                    // Fallback to English if key is missing in current lang
                    const fallback = translations['en'][key];
                    if (fallback) el.textContent = fallback;
                }
            });
            
            // Update all placeholder elements with data-key-placeholder
            document.querySelectorAll('[data-key-placeholder]').forEach(el => {
                const key = el.getAttribute('data-key-placeholder');
                const translation = translations[lang][key];
                if (translation) {
                    el.placeholder = translation;
                } else {
                    const fallback = translations['en'][key];
                    if (fallback) el.placeholder = fallback;
                }
            });
            
            // --- Update dynamic testimonial content ---
            const currentLang = translations[lang];
            const defaultLang = translations['en'];

            const t1Text = document.getElementById('testimonial1Text');
            const t1Name = document.getElementById('testimonial1Name');
            const t2Text = document.getElementById('testimonial2Text');
            const t2Name = document.getElementById('testimonial2Name');
            const t3Text = document.getElementById('testimonial3Text');
            const t3Name = document.getElementById('testimonial3Name');

            if (t1Text) t1Text.textContent = currentLang.testimonial1Text || defaultLang.testimonial1Text;
            if (t1Name) t1Name.textContent = currentLang.testimonial1Name || defaultLang.testimonial1Name;
            if (t2Text) t2Text.textContent = currentLang.testimonial2Text || defaultLang.testimonial2Text;
            if (t2Name) t2Name.textContent = currentLang.testimonial2Name || defaultLang.testimonial2Name;
            if (t3Text) t3Text.textContent = currentLang.testimonial3Text || defaultLang.testimonial3Text;
            if (t3Name) t3Name.textContent = currentLang.testimonial3Name || defaultLang.testimonial3Name;


            // Update active state of language buttons
            const allLangButtons = document.querySelectorAll('.lang-select-btn');
            allLangButtons.forEach(btn => {
                if (btn.getAttribute('data-lang') === lang) {
                    btn.classList.add('bg-indigo-600', 'text-white');
                    btn.classList.remove('bg-slate-200', 'dark:bg-slate-700', 'text-slate-800', 'dark:text-slate-200');
                } else {
                    btn.classList.remove('bg-indigo-600', 'text-white');
                    btn.classList.add('bg-slate-200', 'dark:bg-slate-700', 'text-slate-800', 'dark:text-slate-200');
                }
            });
        }


        document.addEventListener('DOMContentLoaded', async function () {
            
            // --- FairVend Machine Data ---
            const fairVendMachines = [
                {
                    name: "FairVend Community Hub - Delhi Gate",
                    coords: [28.6435, 77.2341], // New Delhi
                    items: ["Sanitary Napkins", "Water Bottles", "Glucose Biscuits", "Toothpaste", "Soap Bar"]
                },
                {
                    name: "FairVend Station - Dadar T.T., Mumbai",
                    coords: [19.0181, 72.8504], // Mumbai
                    items: ["Energy Bars", "Milk Powder Sachet", "Bandages", "ORS Packets", "Small Toys (for kids)"]
                },
                {
                    name: "FairVend Kiosk - Chennai Central",
                    coords: [13.0858, 80.2785], // Chennai
                    items: ["Rice Poha", "Candles & Matchbox", "Paracetamol Strips", "Small Towel", "Basic School Supplies"]
                },
                {
                    name: "FairVend Market Point - MG Road, Bangalore",
                    coords: [12.9734, 77.6067], // Bangalore
                    items: ["Water Bottles", "Electrolyte Drink", "Sanitary Napkins", "Millet Snacks", "Diapers (Single Pack)"]
                },
                {
                    name: "FairVend Shelter Site - Howrah Bridge, Kolkata",
                    coords: [22.5843, 88.3432], // Kolkata
                    items: ["Thermal Blankets (Small)", "Soap Bar", "Salty Snacks", "Tea/Coffee Sachets", "Gloves"]
                }
            ];
            <script>
document.addEventListener('DOMContentLoaded', function () {
  // Initialize Leaflet map
  const map = L.map('map').setView([20.5937, 78.9629], 5); // Center on India

  // Add OpenStreetMap tiles
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // Add a sample marker
  const sampleMarker = L.marker([28.6139, 77.2090])
    .addTo(map)
    .bindPopup('Example FairVend Machine: Connaught Place, Delhi');

  // Handle search button
  const searchBtn = document.getElementById('search-btn');
  const locationInput = document.getElementById('location-input');
  const searchStatus = document.getElementById('search-status');

  searchBtn.addEventListener('click', async () => {
    const query = locationInput.value.trim();
    if (!query) {
      searchStatus.textContent = 'Please enter a location.';
      return;
    }
    searchStatus.textContent = 'Searching...';

    try {
      const res = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}`);
      const data = await res.json();
      if (data.length === 0) {
        searchStatus.textContent = 'No results found.';
        return;
      }

      const { lat, lon, display_name } = data[0];
      map.setView([lat, lon], 13);
      L.marker([lat, lon]).addTo(map).bindPopup(`Searched location: ${display_name}`).openPopup();
      searchStatus.textContent = `Showing results for: ${display_name}`;
    } catch (error) {
      searchStatus.textContent = 'Error fetching location data.';
      console.error(error);
    }
  });

  // Add user location button (if supported)
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      pos => {
        const { latitude, longitude } = pos.coords;
        const userMarker = L.marker([latitude, longitude], {
          title: 'You are here'
        })
          .addTo(map)
          .bindPopup('Your Current Location');
        map.setView([latitude, longitude], 13);
      },
      err => console.warn('Geolocation error:', err.message)
    );
  }
});
</script>




    </script>
                        <script>
document.addEventListener('DOMContentLoaded', () => {
  // Initialize Leaflet map
  const map = L.map('map').setView([20.5937, 78.9629], 5);

  // Add tile layer
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // Add vending machine markers
  const machines = [
    { name: "Delhi Gate – Delhi", coords: [28.6435, 77.2341] },
    { name: "Dadar – Mumbai", coords: [19.0181, 72.8504] },
    { name: "Chennai Central", coords: [13.0858, 80.2785] },
    { name: "MG Road – Bangalore", coords: [12.9734, 77.6067] },
    { name: "Howrah Bridge – Kolkata", coords: [22.5843, 88.3432] }
  ];
  machines.forEach(m =>
    L.marker(m.coords).addTo(map).bindPopup(`<b>${m.name}</b>`)
  );

  // Handle search
  const searchBtn = document.getElementById('search-btn');
  const locationInput = document.getElementById('location-input');
  const searchStatus = document.getElementById('search-status');

  searchBtn.addEventListener('click', async () => {
    const q = locationInput.value.trim();
    if (!q) { searchStatus.textContent = 'Please enter a location.'; return; }
    searchStatus.textContent = 'Searching...';

    try {
      const res = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(q)}`);
      const data = await res.json();
      if (!data.length) { searchStatus.textContent = 'No results found.'; return; }

      const { lat, lon, display_name } = data[0];
      map.setView([lat, lon], 13);
      L.marker([lat, lon]).addTo(map).bindPopup(`Searched: ${display_name}`).openPopup();
      searchStatus.textContent = `Showing: ${display_name}`;
    } catch {
      searchStatus.textContent = 'Error fetching location.';
    }
  });

  // Optional: show user location
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(pos => {
      const { latitude, longitude } = pos.coords;
      L.marker([latitude, longitude]).addTo(map).bindPopup('You are here').openPopup();
      map.setView([latitude, longitude], 12);
    });
  }
});
</script>

           <footer class="bg-gray-900 text-gray-300 text-center py-4">
  © 2025 FairVend. All rights reserved. | Making essential goods accessible to everyone.
</footer>

<!-- ✅ Corrected JS starts -->
<script type="module">
  /* -------------------- Firebase Initialization -------------------- */
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBxu9Yb6alK4m8APv_OcRl7J5x4tTi9zwM",
    authDomain: "fairvend-6913d.firebaseapp.com",
    projectId: "fairvend-6913d",
    storageBucket: "fairvend-6913d.appspot.com",
    messagingSenderId: "1014559943459",
    appId: "1:1014559943459:web:396becd9e7a19a1373ba96"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  /* -------------------- Leaflet Map Setup -------------------- */
  document.addEventListener('DOMContentLoaded', () => {
    const map = L.map('map').setView([20.5937, 78.9629], 5); // Center on India

    // Add tile layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // FairVend machine markers
    const fairvendMachines = [
      { name: "Delhi Gate – Delhi", coords: [28.6435, 77.2341] },
      { name: "Dadar – Mumbai", coords: [19.0181, 72.8504] },
      { name: "Chennai Central", coords: [13.0858, 80.2785] },
      { name: "MG Road – Bangalore", coords: [12.9734, 77.6067] },
      { name: "Howrah Bridge – Kolkata", coords: [22.5843, 88.3432] }
    ];

    fairvendMachines.forEach(machine => {
      L.marker(machine.coords)
        .addTo(map)
        .bindPopup(`<b>${machine.name}</b><br>FairVend Machine`);
    });

    // Search functionality
    const searchBtn = document.getElementById('search-btn');
    const locationInput = document.getElementById('location-input');
    const searchStatus = document.getElementById('search-status');

    searchBtn.addEventListener('click', async () => {
      const query = locationInput.value.trim();
      if (!query) {
        searchStatus.textContent = 'Please enter a location.';
        return;
      }
      searchStatus.textContent = 'Searching...';

      try {
        const res = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}`);
        const data = await res.json();
        if (data.length === 0) {
          searchStatus.textContent = 'No results found.';
          return;
        }

        const { lat, lon, display_name } = data[0];
        map.setView([lat, lon], 13);
        L.marker([lat, lon]).addTo(map).bindPopup(`Searched: ${display_name}`).openPopup();
        searchStatus.textContent = `Showing: ${display_name}`;
      } catch {
        searchStatus.textContent = 'Error fetching location.';
      }
    });

    // Optional: show user location
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(pos => {
        const { latitude, longitude } = pos.coords;
        L.marker([latitude, longitude])
          .addTo(map)
          .bindPopup('You are here')
          .openPopup();
        map.setView([latitude, longitude], 12);
      });
    }
  });
</script>
<!-- ✅ Corrected JS ends -->

</body>
</html>
             

</body>
</html>
