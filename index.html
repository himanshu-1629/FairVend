<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FairVend - Breaking Barriers to Essential Goods</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
        // Support for dark mode in Tailwind
        tailwind.config = {
          darkMode: 'class',
        }
    </script>
    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        #map {
            height: 500px;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            z-index: 10;
        }
        .leaflet-popup-content-wrapper {
            background-color: #fff;
            color: #333;
        }
        .dark .leaflet-popup-content-wrapper {
            background-color: #1f2937;
            color: #f3f4f6;
        }
        .dark .leaflet-tile-pane {
             filter: brightness(0.6) invert(1) contrast(3) hue-rotate(200deg) saturate(0.3) brightness(0.7);
        }
        /* Style for the CAPTCHA text */
        #captcha-text {
            user-select: none;
            text-decoration: line-through;
            font-style: italic;
        }
        /* Style for the user's location marker */
        .user-location-marker {
            filter: hue-rotate(180deg);
        }

        /* --- Creative Header Styles --- */
        .nav-link {
            position: relative;
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: #4f46e5; /* indigo-600 */
        }
        .dark .nav-link:hover {
            color: #818cf8; /* indigo-400 */
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #6366f1; /* indigo-500 */
            transition: width 0.3s ease;
        }
        .dark .nav-link::after {
            background-color: #818cf8; /* indigo-400 */
        }
        .nav-link:hover::after {
            width: 100%;
        }

        .header-scrolled {
            background-color: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .dark .header-scrolled {
            background-color: rgba(15, 23, 42, 0.95); /* slate-900 */
        }
        .header-scrolled nav {
            padding-top: 0.75rem; /* py-3 */
            padding-bottom: 0.75rem; /* py-3 */
        }
        
        /* --- Static Gradient Styles --- */
        .btn-gradient {
            background-size: 100% auto;
            transition: filter 0.3s ease;
        }
        .btn-gradient:hover {
            filter: brightness(110%);
        }
        .btn-gradient-green {
             background-image: linear-gradient(to right, #4ade80, #34d399, #22c55e);
        }
        .btn-gradient-indigo {
             background-image: linear-gradient(to right, #818cf8, #6366f1, #4f46e5);
        }
        .card-gradient-indigo {
            background: linear-gradient(135deg, #ffffff 50%, #eef2ff); /* white to indigo-50 */
        }
        .dark .card-gradient-indigo {
             background: linear-gradient(135deg, #1f2937 50%, #312e81); /* slate-800 to indigo-900 */
        }
        .card-gradient-green {
            background: linear-gradient(135deg, #ffffff 50%, #f0fdf4); /* white to green-50 */
        }
        .dark .card-gradient-green {
             background: linear-gradient(135deg, #1f2937 50%, #14532d); /* slate-800 to green-900 */
        }
        .card-gradient-amber {
            background: linear-gradient(135deg, #ffffff 50%, #fffbeb); /* white to amber-50 */
        }
        .dark .card-gradient-amber {
             background: linear-gradient(135deg, #1f2937 50%, #78350f); /* slate-800 to amber-900 */
        }
        .slider-track {
            transition: transform 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 dark:bg-slate-900 dark:text-slate-200 transition-colors duration-300">
    
    <div id="language-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 max-w-sm w-full text-center">
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white" data-key="chooseLangTitle">Choose Your Language</h3>
            <p class="mt-2 text-slate-600 dark:text-slate-300" data-key="chooseLangSubtitle">Please select your preferred language.</p>
        
            <div class="mt-6 flex flex-col gap-4">
                <button class="lang-select-btn w-full bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-semibold py-3 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition" data-lang="en">English</button>
                <button class="lang-select-btn w-full bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-semibold py-3 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition" data-lang="hi">हिन्दी (Hindi)</button>
                <button class="lang-select-btn w-full bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-semibold py-3 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition" data-lang="ta">தமிழ் (Tamil)</button>
            </div>

            <div class="mt-6 flex items-center justify-center">
                <input id="remember-lang" type="checkbox" class="h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 bg-white dark:bg-slate-700 dark:border-slate-600">
                <label for="remember-lang" class="ml-2 block text-sm text-slate-700 dark:text-slate-300" data-key="rememberMe">Remember my preference</label>
            </div>
        </div>
    </div>


    <header class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-lg sticky top-0 z-50 transition-all duration-300">
        <nav class="container mx-auto px-6 py-5 flex justify-between items-center transition-all duration-300">
            <div class="flex-1 flex justify-start">
                <a href="#" class="flex items-center gap-2 text-2xl font-bold">
                    <svg class="w-8 h-8 text-indigo-600 dark:text-indigo-400" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.001 4.52853C14.35 2.42 17.98 2.49 20.2426 4.75736C22.5053 7.02472 22.583 10.6356 20.4786 12.993L11.9999 21.485L3.52138 12.993C1.41705 10.6356 1.49472 7.02472 3.75736 4.75736C6.02 2.49 9.64999 2.42 12.001 4.52853Z"></path></svg>
                    <span class="hidden sm:inline text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-blue-500 dark:from-indigo-400 dark:to-blue-400">FairVend</span>
                </a>
            </div>
            
            <div class="hidden lg:flex items-center space-x-10 text-sm font-medium text-slate-600 dark:text-slate-300">
                <a href="#how-it-works" class="nav-link" data-key="navHowItWorks">How It Works</a>
                <a href="#impact" class="nav-link" data-key="navImpact">Impact</a>
                <a href="#find-machine" id="header-find-machine-btn-desktop" class="nav-link" data-key="navFindMachine">Find Nearest Machine</a>
            </div>

            <div class="flex-1 flex justify-end items-center gap-3 sm:gap-4">
                 <a href="#donate" class="bg-indigo-600 text-white font-semibold px-4 sm:px-5 py-2.5 rounded-lg hover:bg-indigo-700 transition-all shadow-sm hover:shadow-md text-sm" data-key="navDonateNow">Donate Now</a>
                
                 <div class="relative">
                    <button id="settings-button" class="p-2 rounded-md text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700">
                         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    </button>
                    <div id="settings-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50">
                        <div class="px-4 py-2 text-xs font-semibold text-slate-400" data-key="prefLang">Language</div>
                        <a href="#" class="block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 lang-select-btn" data-lang="en">English</a>
                        <a href="#" class="block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 lang-select-btn" data-lang="hi">हिन्दी</a>
                        <a href="#" class="block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 lang-select-btn" data-lang="ta">தமிழ்</a>
                        <div class="border-t border-slate-200 dark:border-slate-700 my-1"></div>
                        <div class="px-4 py-2 text-xs font-semibold text-slate-400" data-key="prefTheme">Theme</div>
                        <div class="flex justify-around py-1">
                            <button id="theme-light-btn" class="theme-select-btn p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700">
                                <svg class="w-5 h-5 text-slate-700 dark:text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                            </button>
                             <button id="theme-dark-btn" class="theme-select-btn p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700">
                                <svg class="w-5 h-5 text-slate-700 dark:text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                            </button>
                        </div>
                    </div>
                </div>

                 <button id="mobile-menu-button" class="lg:hidden text-slate-600 dark:text-slate-300 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden lg:hidden px-6 pb-4">
            <a href="#how-it-works" class="block py-2 text-slate-600 dark:text-slate-300" data-key="navHowItWorks_mobile">How It Works</a>
            <a href="#impact" class="block py-2 text-slate-600 dark:text-slate-300" data-key="navImpact_mobile">Impact</a>
            <a href="#find-machine" id="header-find-machine-btn-mobile" class="block py-2 text-slate-600 dark:text-slate-300" data-key="navFindMachine_mobile">Find Nearest Machine</a>
        </div>
    </header>

    
    <main>
        <section class="relative bg-slate-800">
            <div class="absolute inset-0">
                <img src="https://images.unsplash.com/photo-1593113598332-cd288d649433?q=80&w=2070&auto=format&fit=crop" alt="A person giving food to someone in need" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-slate-900/70"></div>
            </div>
            <div class="relative container mx-auto px-6 py-24 md:py-40 text-center text-white">
                <div class="flex justify-center items-center gap-4">
                    <div class="bg-white/10 backdrop-blur-sm rounded-full px-4 py-2 text-sm font-medium" data-key="fundedAmount">₹2.5M+ Funded</div>
                    <div class="bg-white/10 backdrop-blur-sm rounded-full px-4 py-2 text-sm font-medium" data-key="livesImpacted">50,000+ Lives Impacted</div>
                </div>
                <h1 class="mt-8 text-4xl md:text-6xl font-extrabold leading-tight">
                    <span data-key="heroTitle1">Breaking</span> <span class="text-amber-400" data-key="heroTitle2">Barriers</span> <span data-key="heroTitle3">to Essential Goods</span>
                </h1>
                <p class="mt-6 max-w-3xl mx-auto text-lg text-slate-300" data-key="heroSubtitle">Color-coded discount cards connecting those in need to affordable essentials.
                Your donation helps us provide up to 50% discounts at vending machines across the community.</p>
                <div class="mt-10 flex flex-col sm:flex-row justify-center items-center gap-4">
                    <a href="#find-machine" id="find-nearest-btn" class="w-full sm:w-auto btn-gradient btn-gradient-indigo text-white font-semibold px-8 py-3 rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-1" data-key="heroBtnFind">Find Nearest Machine</a>
                    <a href="#donate" class="w-full sm:w-auto bg-slate-100/20 text-white font-semibold px-8 py-3 rounded-lg hover:bg-slate-100/30 transition-all ring-1 ring-inset ring-white/30 shadow-sm hover:shadow-md" data-key="heroBtnDonate">Make a Donation</a>
                </div>
            </div>
        </section>
        
        <section id="impact" class="py-20 md:py-28 bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-800/50">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white" data-key="impactTitle">Our Collective Impact</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-slate-600 dark:text-slate-300" data-key="impactSubtitle">Transparency is at the heart of what we do.
                    See how your contributions are making a tangible difference in real-time.</p>
                </div>
                <div class="max-w-4xl mx-auto mt-16 grid grid-cols-1 md:grid-cols-2 gap-8 text-center">
                    <div class="bg-slate-100 dark:bg-slate-800 p-8 rounded-2xl">
                        <div class="text-5xl font-extrabold text-indigo-600 dark:text-indigo-400">₹2.5M+</div>
                        <div class="mt-2 text-lg font-semibold text-slate-700 dark:text-slate-300" data-key="impactFundsTitle">Total Funds Raised</div>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="impactFundsDesc">From thousands of generous donors across the country.</p>
                    </div>
                    <div class="bg-slate-100 dark:bg-slate-800 p-8 rounded-2xl">
                        <div class="text-5xl font-extrabold text-green-600 dark:text-green-400">50,000+</div>
                        <div class="mt-2 text-lg font-semibold text-slate-700 dark:text-slate-300" data-key="impactPeopleTitle">Individuals Supported</div>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="impactPeopleDesc">Provided with essential goods through our vending network.</p>
                    </div>
                </div>

                <div class="mt-20">
                    <h3 class="text-2xl md:text-3xl font-bold text-center text-slate-900 dark:text-white" data-key="testimonialsTitle">Stories from Our Community</h3>
                    <div class="relative max-w-2xl mx-auto mt-8">
                        <div class="overflow-hidden">
                            <div id="slider-track" class="flex slider-track">
                                <div class="w-full flex-shrink-0 px-4">
                                    <div class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg text-center">
                                        <div class="text-amber-400 flex justify-center gap-1 mb-4">
                                            <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                        </div>
                                        <p class="text-slate-600 dark:text-slate-300 italic" data-key="testimonial1Text">"As a student, every rupee matters.
                                        The FairVend card has been a blessing, helping me buy snacks and essentials without worrying.
                                        It feels like someone cares."</p>
                                        <div class="mt-4 font-bold text-slate-800 dark:text-slate-100" data-key="testimonial1Name">- Ananya, Student from Mumbai</div>
                                    </div>
                                </div>
                                <div class="w-full flex-shrink-0 px-4">
                                    <div class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg text-center">
                                        <div class="text-amber-400 flex justify-center gap-1 mb-4">
                                            <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                        </div>
                                        <p class="text-slate-600 dark:text-slate-300 italic" data-key="testimonial2Text">"After a long day of work, having access to affordable drinks and sanitary products for my daughter is a huge relief.
                                        Thank you, FairVend, for your support."</p>
                                        <div class="mt-4 font-bold text-slate-800 dark:text-slate-100" data-key="testimonial2Name">- Rajesh, Worker from Delhi</div>
                                    </div>
                                </div>
                                <div class="w-full flex-shrink-0 px-4">
                                     <div class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg text-center">
                                        <div class="text-amber-400 flex justify-center gap-1 mb-4">
                                            <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                        </div>
                                        <p class="text-slate-600 dark:text-slate-300 italic" data-key="testimonial3Text">"The dignity this program provides is immeasurable.
                                        Getting essentials for my family without feeling like I'm asking for a handout has made all the difference."</p>
                                        <div class="mt-4 font-bold text-slate-800 dark:text-slate-100" data-key="testimonial3Name">- Priya, Mother from Chennai</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button id="prev-slide" class="absolute top-1/2 -translate-y-1/2 left-0 -translate-x-12 p-2 rounded-full bg-white/50 dark:bg-slate-700/50 hover:bg-white dark:hover:bg-slate-700 transition">
                            <svg class="w-6 h-6 text-slate-700 dark:text-slate-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                        </button>
                        <button id="next-slide" class="absolute top-1/2 -translate-y-1/2 right-0 translate-x-12 p-2 rounded-full bg-white/50 dark:bg-slate-700/50 hover:bg-white dark:hover:bg-slate-700 transition">
                            <svg class="w-6 h-6 text-slate-700 dark:text-slate-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </button>
                    </div>
                </div>

            </div>
        </section>

        <section id="how-it-works" class="py-20 md:py-28">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white" data-key="howTitle">A Simple System for a Big Impact</h2>
                <p class="mt-4 max-w-2xl mx-auto text-slate-600 dark:text-slate-300" data-key="howSubtitle">We believe in direct, transparent, and dignified support.
                Here’s how our color-coded discount system works.</p>
                <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-10 md:gap-8">
                    <div class="card-gradient-indigo p-8 rounded-2xl shadow-lg hover:shadow-xl dark:hover:shadow-indigo-500/10 transition-shadow transform hover:-translate-y-2">
                        <div class="bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 w-16 h-16 rounded-full flex items-center justify-center mx-auto">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
                        </div>
                        <h3 class="mt-6 text-xl font-bold dark:text-white" data-key="howStep1Title">Get Your Card</h3>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="howStep1Desc">In partnership with local NGOs, we distribute FairVend cards.
                        Each color represents a different level of support.</p>
                    </div>
                    <div class="card-gradient-green p-8 rounded-2xl shadow-lg hover:shadow-xl dark:hover:shadow-green-500/10 transition-shadow transform hover:-translate-y-2">
                        <div class="bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 w-16 h-16 rounded-full flex items-center justify-center mx-auto">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                        </div>
                        <h3 class="mt-6 text-xl font-bold dark:text-white" data-key="howStep2Title">Scan the Color</h3>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="howStep2Desc">Simply show your card to the vending machine's scanner.
                        Our system instantly recognizes and applies the discount.</p>
                    </div>
                    <div class="card-gradient-amber p-8 rounded-2xl shadow-lg hover:shadow-xl dark:hover:shadow-amber-500/10 transition-shadow transform hover:-translate-y-2">
                        <div class="bg-amber-100 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400 w-16 h-16 rounded-full flex items-center justify-center mx-auto">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M12 6h.01M6 12h.01M18 12h.01M7 7h.01M17 7h.01M7 17h.01M17 17h.01"></path></svg>
                        </div>
                        <h3 class="mt-6 text-xl font-bold dark:text-white" data-key="howStep3Title">Receive Your Discount</h3>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="howStep3Desc">Your discount is funded by generous donors, providing essential items at a more affordable price.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="find-machine" class="py-20 md:py-28">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white" data-key="findTitle">Find a FairVend Machine Near You</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-slate-600 dark:text-slate-300" data-key="findSubtitle">Enter your area or city to locate the closest machine and get directions.</p>
                </div>
                <div class="max-w-4xl mx-auto mt-12">
                    <div class="flex flex-col sm:flex-row gap-4 mb-6">
                        <input id="location-input" type="text" data-key-placeholder="findPlaceholder" placeholder="e.g., 'Mumbai' or 'Connaught Place, Delhi'" class="flex-grow w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition bg-white dark:bg-slate-800">
                        <button id="search-btn" class="w-full sm:w-auto bg-indigo-600 text-white font-semibold px-8 py-3 rounded-lg hover:bg-indigo-700 transition-all shadow-sm hover:shadow-md" data-key="findBtnSearch">Search</button>
                    </div>
                    <p id="search-status" class="text-center text-slate-500 dark:text-slate-400 min-h-[1.5rem]"></p>
                    <div id="map" class="mt-4"></div>
                </div>
            </div>
        </section>

        <section id="donate" class="py-20 md:py-28 bg-gradient-to-b from-white to-indigo-50 dark:from-slate-800/50 dark:to-slate-900">
            <div class="container mx-auto px-6">
                <div class="max-w-3xl mx-auto text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white" data-key="donateTitle">Support Our Mission</h2>
                    <p class="mt-4 text-slate-600 dark:text-slate-300" data-key="donateSubtitle">Your contribution directly funds the discounts we provide.
                    Every donation helps someone in need access essential products with dignity.</p>
                </div>
                <div class="max-w-lg mx-auto mt-12 bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl">
                    <form id="donation-form" novalidate>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mb-6">
                            <div>
                                <label for="donor-name" class="block text-sm font-medium text-slate-700 dark:text-slate-300" data-key="donateLabelName">Full Name</label>
                                <input type="text" id="donor-name" class="mt-1 block w-full rounded-md border-slate-300 dark:border-slate-600 py-3 px-4 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" data-key-placeholder="donatePlaceholderName" placeholder="Priya Sharma" required>
                                <p id="name-error" class="hidden text-red-500 text-sm mt-1" data-key="donateErrorName">Please enter your full name.</p>
                            </div>
                            <div>
                                <label for="donor-email" class="block text-sm font-medium text-slate-700 dark:text-slate-300" data-key="donateLabelEmail">Email Address</label>
                                <input type="email" id="donor-email" class="mt-1 block w-full rounded-md border-slate-300 dark:border-slate-600 py-3 px-4 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" data-key-placeholder="donatePlaceholderEmail" placeholder="you@example.com" required>
                                <p id="email-error" class="hidden text-red-500 text-sm mt-1" data-key="donateErrorEmail">Please enter a valid email.</p>
                            </div>
                        </div>
                        <p class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2" data-key="donateSelectAmount">Select an amount</p>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                            <button type="button" class="donation-amount-btn border border-slate-300 dark:border-slate-600 rounded-lg py-3 text-lg font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition" data-amount="100">₹100</button>
                            <button type="button" class="donation-amount-btn border border-slate-300 dark:border-slate-600 rounded-lg py-3 text-lg font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition" data-amount="250">₹250</button>
                            <button type="button" class="donation-amount-btn border border-slate-300 dark:border-slate-600 rounded-lg py-3 text-lg font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition" data-amount="500">₹500</button>
                            <button type="button" class="donation-amount-btn border border-indigo-500 ring-2 ring-indigo-300 dark:border-indigo-400 dark:ring-indigo-600 rounded-lg py-3 text-lg font-semibold bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 transition" data-amount="1000">₹1000</button>
                        </div>
                        <div class="mt-6">
                            <label for="custom-amount" class="block text-sm font-medium text-slate-700 dark:text-slate-300" data-key="donateLabelCustom">Or enter a custom amount (₹)</label>
                            <input type="number" id="custom-amount" min="10" step="10" class="mt-1 block w-full rounded-md border-slate-300 dark:border-slate-600 py-3 px-4 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" data-key-placeholder="donatePlaceholderCustom" placeholder="e.g., 350" required>
                        </div>

                        <div class="mt-6">
                            <label for="captcha-input" class="block text-sm font-medium text-slate-700 dark:text-slate-300" data-key="donateLabelCaptcha">Security Check</label>
                            <div class="flex items-center mt-1 space-x-4">
                                <div id="captcha-text" class="text-2xl font-bold px-4 py-2 bg-slate-100 dark:bg-slate-700/50 rounded-md select-none w-32 text-center text-slate-700 dark:text-slate-300"></div>
                                <input type="text" id="captcha-input" class="block w-full rounded-md border-slate-300 dark:border-slate-600 py-3 px-4 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" required>
                                <button type="button" id="refresh-captcha" class="p-3 rounded-md text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2.1m15.357 2.1H15"></path></svg>
                                </button>
                            </div>
                            <p id="captcha-error" class="hidden text-red-500 text-sm mt-1" data-key="donateErrorCaptcha">The security code is incorrect.</p>
                        </div>

                        <button id="donate-btn" type="submit" class="mt-8 w-full btn-gradient btn-gradient-green text-white font-semibold px-8 py-3 rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all" data-key="donateBtnSecure">
                            Donate Securely
                        </button>
                    </form>
                </div>
            </div>
        </section>

    </main>
    
    <footer class="bg-slate-900 dark:bg-slate-900/50 text-white py-12">
        <div class="container mx-auto px-6 text-center">
            <div class="flex justify-center items-center gap-2 text-2xl font-bold mb-4">
                <svg class="w-8 h-8 text-indigo-400" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.001 4.52853C14.35 2.42 17.98 2.49 20.2426 4.75736C22.5053 7.02472 22.583 10.6356 20.4786 12.993L11.9999 21.485L3.52138 12.993C1.41705 10.6356 1.49472 7.02472 3.75736 4.75736C6.02 2.49 9.64999 2.42 12.001 4.52853Z"></path></svg>
                <span>FairVend</span>
            </div>
            <div class="space-x-4 text-sm font-medium text-slate-400 mb-6">
                <a href="#how-it-works" class="hover:text-white transition" data-key="navHowItWorks_footer">How It Works</a>
                <a href="#impact" class="hover:text-white transition" data-key="navImpact_footer">Impact</a>
                <a href="#find-machine" class="hover:text-white transition" data-key="navFindMachine_footer">Find Machine</a>
                <a href="#donate" class="hover:text-white transition" data-key="navDonateNow_footer">Donate Now</a>
            </div>
            <p class="text-sm text-slate-500">
                &copy; 2024 FairVend. <span data-key="footerRights">All rights reserved.</span>
            </p>
        </div>
    </footer>
    
    <div id="thank-you-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 max-w-md w-full text-center">
            <svg class="w-16 h-16 text-green-500 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
            <h3 class="mt-4 text-2xl font-bold text-slate-900 dark:text-white" data-key="thankYouTitle">Thank You!</h3>
            <p id="thank-you-message" class="mt-2 text-slate-600 dark:text-slate-300"></p>
            <button id="close-modal-btn" class="mt-6 bg-indigo-600 text-white font-semibold px-6 py-2 rounded-lg hover:bg-indigo-700 transition" data-key="thankYouClose">Close</button>
        </div>
    </div>


    <script>
        // --- TRANSLATIONS (Expanded for functionality) ---
        const translations = {
            en: {
                // Header/Navigation
                navHowItWorks: "How It Works",
                navImpact: "Impact",
                navFindMachine: "Find Nearest Machine",
                navDonateNow: "Donate Now",
                navHowItWorks_mobile: "How It Works",
                navImpact_mobile: "Impact",
                navFindMachine_mobile: "Find Nearest Machine",
                // Language/Theme
                chooseLangTitle: "Choose Your Language",
                chooseLangSubtitle: "Please select your preferred language.",
                rememberMe: "Remember my preference",
                prefLang: "Language",
                prefTheme: "Theme",
                // Hero Section
                fundedAmount: "₹2.5M+ Funded",
                livesImpacted: "50,000+ Lives Impacted",
                heroTitle1: "Breaking",
                heroTitle2: "Barriers",
                heroTitle3: "to Essential Goods",
                heroSubtitle: "Color-coded discount cards connecting those in need to affordable essentials. Your donation helps us provide up to 50% discounts at vending machines across the community.",
                heroBtnFind: "Find Nearest Machine",
                heroBtnDonate: "Make a Donation",
                // Impact Section
                impactTitle: "Our Collective Impact",
                impactSubtitle: "Transparency is at the heart of what we do. See how your contributions are making a tangible difference in real-time.",
                impactFundsTitle: "Total Funds Raised",
                impactFundsDesc: "From thousands of generous donors across the country.",
                impactPeopleTitle: "Individuals Supported",
                impactPeopleDesc: "Provided with essential goods through our vending network.",
                testimonialsTitle: "Stories from Our Community",
                testimonial1Text: "\"As a student, every rupee matters. The FairVend card has been a blessing, helping me buy snacks and essentials without worrying. It feels like someone cares.\"",
                testimonial1Name: "- Ananya, Student from Mumbai",
                testimonial2Text: "\"After a long day of work, having access to affordable drinks and sanitary products for my daughter is a huge relief. Thank you, FairVend, for your support.\"",
                testimonial2Name: "- Rajesh, Worker from Delhi",
                testimonial3Text: "\"The dignity this program provides is immeasurable. Getting essentials for my family without feeling like I'm asking for a handout has made all the difference.\"",
                testimonial3Name: "- Priya, Mother from Chennai",
                // How It Works Section
                howTitle: "A Simple System for a Big Impact",
                howSubtitle: "We believe in direct, transparent, and dignified support. Here’s how our color-coded discount system works.",
                howStep1Title: "Get Your Card",
                howStep1Desc: "In partnership with local NGOs, we distribute FairVend cards. Each color represents a different level of support.",
                howStep2Title: "Scan the Color",
                howStep2Desc: "Simply show your card to the vending machine's scanner. Our system instantly recognizes and applies the discount.",
                howStep3Title: "Receive Your Discount",
                howStep3Desc: "Your discount is funded by generous donors, providing essential items at a more affordable price.",
                // Find Section
                findTitle: "Find a FairVend Machine Near You",
                findSubtitle: "Enter your area or city to locate the closest machine and get directions.",
                findPlaceholder: "e.g., 'Mumbai' or 'Connaught Place, Delhi'",
                findBtnSearch: "Search",
                // Donation Section
                donateTitle: "Support Our Mission",
                donateSubtitle: "Your contribution directly funds the discounts we provide. Every donation helps someone in need access essential products with dignity.",
                donateLabelName: "Full Name",
                donatePlaceholderName: "Priya Sharma",
                donateErrorName: "Please enter your full name.",
                donateLabelEmail: "Email Address",
                donatePlaceholderEmail: "you@example.com",
                donateErrorEmail: "Please enter a valid email.",
                donateSelectAmount: "Select an amount",
                donateLabelCustom: "Or enter a custom amount (₹)",
                donatePlaceholderCustom: "e.g., 350",
                donateLabelCaptcha: "Security Check",
                donateErrorCaptcha: "The security code is incorrect.",
                donateBtnSecure: "Donate Securely",
                // Footer
                navHowItWorks_footer: "How It Works",
                navImpact_footer: "Impact",
                navFindMachine_footer: "Find Machine",
                navDonateNow_footer: "Donate Now",
                footerRights: "All rights reserved.",
                // Thank You Modal
                thankYouTitle: "Thank You!",
                thankYouClose: "Close",
            },
            hi: {
                // Header/Navigation
                navHowItWorks: "यह कैसे काम करता है",
                navImpact: "प्रभाव",
                navFindMachine: "नजदीकी मशीन ढूंढें",
                navDonateNow: "अभी दान करें",
                navHowItWorks_mobile: "यह कैसे काम करता है",
                navImpact_mobile: "प्रभाव",
                navFindMachine_mobile: "नजदीकी मशीन ढूंढें",
                // Language/Theme
                chooseLangTitle: "अपनी भाषा चुनें",
                chooseLangSubtitle: "कृपया अपनी पसंदीदा भाषा का चयन करें।",
                rememberMe: "मेरी पसंद याद रखें",
                prefLang: "भाषा",
                prefTheme: "थीम",
                // Hero Section
                fundedAmount: "₹2.5M+ वित्त पोषित",
                livesImpacted: "50,000+ जीवन प्रभावित",
                heroTitle1: "आवश्यक वस्तुओं तक",
                heroTitle2: "बाधाओं",
                heroTitle3: "को तोड़ना",
                heroSubtitle: "रंग-कोडित छूट कार्ड जरूरतमंदों को किफायती आवश्यक वस्तुओं से जोड़ते हैं। आपका दान समुदाय भर में वेंडिंग मशीनों पर 50% तक की छूट प्रदान करने में हमारी मदद करता है।",
                heroBtnFind: "नजदीकी मशीन ढूंढें",
                heroBtnDonate: "दान करें",
                 // Impact Section
                impactTitle: "हमारा सामूहिक प्रभाव",
                impactSubtitle: "पारदर्शिता हमारे काम के मूल में है। देखें कि आपका योगदान वास्तविक समय में कैसे tangible बदलाव ला रहा है।",
                impactFundsTitle: "कुल जुटाए गए फंड",
                impactFundsDesc: "देश भर के हजारों उदार दाताओं से।",
                impactPeopleTitle: "समर्थित व्यक्ति",
                impactPeopleDesc: "हमारे वेंडिंग नेटवर्क के माध्यम से आवश्यक वस्तुएं प्रदान की गईं।",
                testimonialsTitle: "हमारे समुदाय की कहानियाँ",
                testimonial1Text: "\"एक छात्र के रूप में, हर रुपया मायने रखता है। फेयरवेंड कार्ड एक आशीर्वाद रहा है, जो मुझे बिना चिंता किए स्नैक्स और आवश्यक वस्तुएं खरीदने में मदद करता है। ऐसा लगता है कि किसी को परवाह है।\"",
                testimonial1Name: "- अनन्या, मुंबई से छात्रा",
                testimonial2Text: "\"एक लंबे दिन के काम के बाद, मेरी बेटी के लिए किफायती पेय और सैनिटरी उत्पादों तक पहुंच होना एक बड़ी राहत है। आपके समर्थन के लिए धन्यवाद, फेयरवेंड।\"",
                testimonial2Name: "- राजेश, दिल्ली से कार्यकर्ता",
                testimonial3Text: "\"यह कार्यक्रम जो सम्मान प्रदान करता है, वह अमूल्य है। अपने परिवार के लिए आवश्यक वस्तुएं प्राप्त करना, बिना यह महसूस किए कि मैं मदद मांग रहा हूं, ने सब कुछ बदल दिया है।\"",
                testimonial3Name: "- प्रिया, चेन्नई से माँ",
                // How It Works Section
                howTitle: "एक बड़े प्रभाव के लिए एक सरल प्रणाली",
                howSubtitle: "हम प्रत्यक्ष, पारदर्शी और गरिमापूर्ण समर्थन में विश्वास करते हैं। यहां बताया गया है कि हमारी रंग-कोडित छूट प्रणाली कैसे काम करती है।",
                howStep1Title: "अपना कार्ड प्राप्त करें",
                howStep1Desc: "स्थानीय गैर सरकारी संगठनों के साथ साझेदारी में, हम फेयरवेंड कार्ड वितरित करते हैं। प्रत्येक रंग समर्थन के एक अलग स्तर का प्रतिनिधित्व करता है।",
                howStep2Title: "रंग स्कैन करें",
                howStep2Desc: "बस वेंडिंग मशीन के स्कैनर को अपना कार्ड दिखाएं। हमारा सिस्टम तुरंत छूट को पहचानता है और लागू करता है।",
                howStep3Title: "अपनी छूट प्राप्त करें",
                howStep3Desc: "आपकी छूट उदार दाताओं द्वारा वित्त पोषित है, जो आवश्यक वस्तुओं को अधिक किफायती मूल्य पर प्रदान करती है।",
                 // Find Section
                findTitle: "अपने पास एक फेयरवेंड मशीन ढूंढें",
                findSubtitle: "नजदीकी मशीन का पता लगाने और दिशा-निर्देश प्राप्त करने के लिए अपना क्षेत्र या शहर दर्ज करें।",
                findPlaceholder: "उदाहरण: 'मुंबई' या 'कनॉट प्लेस, दिल्ली'",
                findBtnSearch: "खोजें",
                 // Donation Section
                donateTitle: "हमारे मिशन का समर्थन करें",
                donateSubtitle: "आपका योगदान सीधे हमारे द्वारा प्रदान की जाने वाली छूटों को वित्त पोषित करता है। हर दान किसी जरूरतमंद को सम्मान के साथ आवश्यक उत्पादों तक पहुंचने में मदद करता है।",
                donateLabelName: "पूरा नाम",
                donatePlaceholderName: "प्रिया शर्मा",
                donateErrorName: "कृपया अपना पूरा नाम दर्ज करें।",
                donateLabelEmail: "ईमेल पता",
                donatePlaceholderEmail: "you@example.com",
                donateErrorEmail: "कृपया एक वैध ईमेल दर्ज करें।",
                donateSelectAmount: "राशि चुनें",
                donateLabelCustom: "या एक कस्टम राशि (₹) दर्ज करें",
                donatePlaceholderCustom: "उदाहरण: 350",
                donateLabelCaptcha: "सुरक्षा जांच",
                donateErrorCaptcha: "सुरक्षा कोड गलत है।",
                donateBtnSecure: "सुरक्षित रूप से दान करें",
                // Footer
                navHowItWorks_footer: "यह कैसे काम करता है",
                navImpact_footer: "प्रभाव",
                navFindMachine_footer: "मशीन ढूंढें",
                navDonateNow_footer: "अभी दान करें",
                footerRights: "सभी अधिकार सुरक्षित हैं।",
                 // Thank You Modal
                thankYouTitle: "धन्यवाद!",
                thankYouClose: "बंद करें",
            },
            ta: {
                // Header/Navigation
                navHowItWorks: "இது எப்படி வேலை செய்கிறது",
                navImpact: "தாக்கம்",
                navFindMachine: "அருகிலுள்ள இயந்திரத்தைக் கண்டறியவும்",
                navDonateNow: "இப்போது நன்கொடை அளியுங்கள்",
                navHowItWorks_mobile: "இது எப்படி வேலை செய்கிறது",
                navImpact_mobile: "தாக்கம்",
                navFindMachine_mobile: "அருகிலுள்ள இயந்திரத்தைக் கண்டறியவும்",
                // Language/Theme
                chooseLangTitle: "உங்கள் மொழியைத் தேர்ந்தெடுக்கவும்",
                chooseLangSubtitle: "தயவுசெய்து நீங்கள் விரும்பும் மொழியைத் தேர்ந்தெடுக்கவும்.",
                rememberMe: "எனது விருப்பத்தை நினைவில் வையுங்கள்",
                prefLang: "மொழி",
                prefTheme: "தீம்",
                // Hero Section
                fundedAmount: "₹2.5M+ நிதியளிக்கப்பட்டது",
                livesImpacted: "50,000+ உயிர்கள் பாதிக்கப்பட்டன",
                heroTitle1: "அத்தியாவசியப் பொருட்கள்",
                heroTitle2: "கிடைப்பதற்கான தடைகளை",
                heroTitle3: "உடைத்தல்",
                heroSubtitle: "தேவைப்படுபவர்களைக் குறைந்த விலையுள்ள அத்தியாவசியப் பொருட்களுடன் வண்ண-குறியிடப்பட்ட தள்ளுபடி அட்டைகள் இணைக்கின்றன. சமூகமெங்கிலுமுள்ள விற்பனை இயந்திரங்களில் 50% வரை தள்ளுபடிகள் வழங்க உங்கள் நன்கொடை எங்களுக்கு உதவுகிறது.",
                heroBtnFind: "அருகிலுள்ள இயந்திரத்தைக் கண்டறியவும்",
                heroBtnDonate: "நன்கொடை அளியுங்கள்",
                // Impact Section
                impactTitle: "எங்கள் கூட்டுத் தாக்கம்",
                impactSubtitle: "வெளிப்படைத்தன்மை எங்கள் பணியின் மையத்தில் உள்ளது. உங்கள் பங்களிப்புகள் நிகழ்நேரத்தில் எப்படித் தகுந்த மாற்றத்தை ஏற்படுத்துகின்றன என்று பாருங்கள்.",
                impactFundsTitle: "மொத்த நிதி திரட்டப்பட்டது",
                impactFundsDesc: "நாடு முழுவதிலுமிருந்து ஆயிரக்கணக்கான நன்கொடையாளர்களிடமிருந்து.",
                impactPeopleTitle: "ஆதரவளிக்கப்பட்ட தனிநபர்கள்",
                impactPeopleDesc: "எங்கள் விற்பனை இயந்திரங்கள் மூலம் அத்தியாவசியப் பொருட்கள் வழங்கப்பட்டன.",
                testimonialsTitle: "எங்கள் சமூகத்திலிருந்து கதைகள்",
                testimonial1Text: "\"ஒரு மாணவராக, ஒவ்வொரு ரூபாயும் முக்கியம். ஃபேர்வென்ட் கார்டு ஒரு வரப்பிரசாதமாக உள்ளது, கவலைப்படாமல் தின்பண்டங்கள் மற்றும் அத்தியாவசியப் பொருட்களை வாங்க எனக்கு உதவுகிறது. யாரோ கவலைப்படுகிறார்கள் போல் உணர்கிறேன்.\"",
                testimonial1Name: "- அனன்யா, மும்பை மாணவி",
                testimonial2Text: "\"ஒரு நாள் வேலைக்குப் பிறகு, என் மகளுக்கு குறைந்த விலையுள்ள பானங்கள் மற்றும் சானிட்டரிப் பொருட்களைப் பெறுவது ஒரு பெரிய நிம்மதி. உங்கள் ஆதரவுக்கு நன்றி, ஃபேர்வென்ட்.\"",
                testimonial2Name: "- ராஜேஷ், டெல்லி தொழிலாளி",
                testimonial3Text: "\"இந்தத் திட்டம் வழங்கும் மரியாதை அளவிட முடியாதது. நான் உதவி கேட்கிறேன் என்று உணராமல் என் குடும்பத்திற்கு அத்தியாவசியப் பொருட்களைப் பெறுவது அனைத்து வித்தியாசத்தையும் ஏற்படுத்தியுள்ளது.\"",
                testimonial3Name: "- பிரியா, சென்னை தாய்",
                // How It Works Section
                howTitle: "ஒரு பெரிய தாக்கத்திற்கான எளிய அமைப்பு",
                howSubtitle: "நேரடி, வெளிப்படையான மற்றும் மரியாதைக்குரிய ஆதரவை நாங்கள் நம்புகிறோம். எங்கள் வண்ண-குறியிடப்பட்ட தள்ளுபடி அமைப்பு எவ்வாறு செயல்படுகிறது என்பது இங்கே:",
                howStep1Title: "உங்கள் அட்டையைப் பெறுங்கள்",
                howStep1Desc: "உள்ளூர் தன்னார்வ தொண்டு நிறுவனங்களுடன் இணைந்து, நாங்கள் ஃபேர்வென்ட் அட்டைகளை விநியோகிக்கிறோம். ஒவ்வொரு வண்ணமும் ஒரு வித்தியாசமான ஆதரவின் அளவைக் குறிக்கிறது.",
                howStep2Title: "வண்ணத்தை ஸ்கேன் செய்யுங்கள்",
                howStep2Desc: "விற்பனை இயந்திரத்தின் ஸ்கேனருக்கு உங்கள் அட்டையை காண்பித்தால் போதும். எங்கள் அமைப்பு உடனடியாக தள்ளுபடியை அங்கீகரித்து செயல்படுத்துகிறது.",
                howStep3Title: "உங்கள் தள்ளுபடியைப் பெறுங்கள்",
                howStep3Desc: "உங்கள் தள்ளுபடி தாராளமான நன்கொடையாளர்களால் நிதியளிக்கப்படுகிறது, அத்தியாவசியப் பொருட்களை மலிவு விலையில் வழங்குகிறது.",
                // Find Section
                findTitle: "உங்களுக்கு அருகிலுள்ள ஃபேர்வென்ட் இயந்திரத்தைக் கண்டறியவும்",
                findSubtitle: "அருகிலுள்ள இயந்திரத்தைக் கண்டறிந்து திசைகளைப் பெற உங்கள் பகுதி அல்லது நகரத்தை உள்ளிடவும்.",
                findPlaceholder: "எ.கா: 'மும்பை' அல்லது 'கன்னாட் பிளேஸ், டெல்லி'",
                findBtnSearch: "தேடல்",
                // Donation Section
                donateTitle: "எங்கள் பணிக்கு ஆதரவு அளியுங்கள்",
                donateSubtitle: "நீங்கள் அளிக்கும் பங்களிப்பு, நாங்கள் வழங்கும் தள்ளுபடிகளை நேரடியாக நிதியளிக்கிறது. ஒவ்வொரு நன்கொடையும் ஒரு தேவைப்படுபவர் அத்தியாவசியப் பொருட்களை மரியாதையுடன் அணுக உதவுகிறது.",
                donateLabelName: "முழுப் பெயர்",
                donatePlaceholderName: "பிரியா சர்மா",
                donateErrorName: "தயவுசெய்து உங்கள் முழுப் பெயரை உள்ளிடவும்.",
                donateLabelEmail: "மின்னஞ்சல் முகவரி",
                donatePlaceholderEmail: "you@example.com",
                donateErrorEmail: "தயவுசெய்து ஒரு சரியான மின்னஞ்சலை உள்ளிடவும்.",
                donateSelectAmount: "தொகையைத் தேர்ந்தெடுக்கவும்",
                donateLabelCustom: "அல்லது ஒரு விருப்பத் தொகையை (₹) உள்ளிடவும்",
                donatePlaceholderCustom: "எ.கா: 350",
                donateLabelCaptcha: "பாதுகாப்புச் சரிபார்ப்பு",
                donateErrorCaptcha: "பாதுகாப்பு குறியீடு தவறானது.",
                donateBtnSecure: "பாதுகாப்பாக நன்கொடை அளியுங்கள்",
                // Footer
                navHowItWorks_footer: "இது எப்படி வேலை செய்கிறது",
                navImpact_footer: "தாக்கம்",
                navFindMachine_footer: "இயந்திரத்தைக் கண்டறியவும்",
                navDonateNow_footer: "இப்போது நன்கொடை அளியுங்கள்",
                footerRights: "அனைத்து உரிமைகளும் பாதுகாக்கப்பட்டவை.",
                // Thank You Modal
                thankYouTitle: "நன்றி!",
                thankYouClose: "மூடு",
            }
        };

        let lang = 'en'; // Default language

        // --- THEME PREFERENCE (FIXED DARK MODE) ---

        function applyTheme(theme) {
            const body = document.body;
            if (theme === 'dark') {
                body.classList.add('dark');
                localStorage.setItem('color-theme', 'dark');
            } else {
                body.classList.remove('dark');
                localStorage.setItem('color-theme', 'light');
            }
            // Update icon states in the dropdown (visual cue)
            document.getElementById('theme-light-btn').classList.toggle('bg-slate-200', theme === 'light');
            document.getElementById('theme-dark-btn').classList.toggle('bg-slate-700', theme === 'dark');
        }

        function initTheme() {
            const savedTheme = localStorage.getItem('color-theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            // Priority: Saved preference > System preference > Default (light)
            if (savedTheme) {
                applyTheme(savedTheme);
            } else if (prefersDark) {
                applyTheme('dark');
            } else {
                applyTheme('light');
            }
        }
        
        // --- LANGUAGE PREFERENCE (NEW FEATURE) ---
        const languageModal = document.getElementById('language-modal');
        const rememberLangCheckbox = document.getElementById('remember-lang');
        
        function updateContent() {
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.dataset.key;
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });

            document.querySelectorAll('[data-key-placeholder]').forEach(element => {
                const key = element.dataset.keyPlaceholder;
                if (translations[lang] && translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });
        }

        function applyLanguage(newLang) {
            lang = newLang;
            document.documentElement.lang = newLang;
            updateContent();
            
            // Update button styles in settings dropdown for visual feedback
            document.querySelectorAll('#settings-dropdown .lang-select-btn').forEach(btn => {
                if (btn.dataset.lang === newLang) {
                    btn.classList.remove('text-slate-700', 'dark:text-slate-200');
                    btn.classList.add('text-indigo-600', 'dark:text-indigo-400', 'font-bold');
                } else {
                    btn.classList.add('text-slate-700', 'dark:text-slate-200');
                    btn.classList.remove('text-indigo-600', 'dark:text-indigo-400', 'font-bold');
                }
            });
            languageModal.classList.add('hidden'); // Hide modal after selection
        }

        function initLanguage() {
            const savedLang = localStorage.getItem('userLang');
            if (savedLang) {
                applyLanguage(savedLang);
            } else {
                // Show modal if no preference is saved, defaulting to 'en' in the modal
                applyLanguage('en'); 
                languageModal.classList.remove('hidden');
            }
        }


        // --- EXISTING UTILITY FUNCTIONS (Simplified/Maintained) ---
        function generateCaptcha() {
            const chars = '0123456789abcdefghijklmnopqrstuvwxyz';
            let captcha = '';
            for (let i = 0; i < 6; i++) {
                captcha += chars[Math.floor(Math.random() * chars.length)];
            }
            document.getElementById('captcha-text').textContent = captcha;
            document.getElementById('captcha-input').value = '';
            document.getElementById('captcha-error').classList.add('hidden');
        }

        function showModal(message) {
            document.getElementById('thank-you-message').textContent = message;
            document.getElementById('thank-you-modal').classList.remove('hidden');
        }

        function hideModal() {
            document.getElementById('thank-you-modal').classList.add('hidden');
        }


        // --- DOM CONTENT LOADED ---
        document.addEventListener('DOMContentLoaded', () => {
            
            initTheme(); // Initialize theme (Fixes Dark Mode)
            initLanguage(); // Initialize language (Handles persistence and initial ask)

            // --- Theme Event Listeners (FIXED DARK MODE) ---
            document.getElementById('theme-light-btn').addEventListener('click', () => applyTheme('light'));
            document.getElementById('theme-dark-btn').addEventListener('click', () => applyTheme('dark'));

            // --- Language Event Listeners (NEW FEATURE LOGIC) ---
            document.querySelectorAll('.lang-select-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const newLang = e.currentTarget.dataset.lang;
                    
                    if (e.currentTarget.closest('#language-modal')) {
                        // Logic for the initial language selection modal
                        if (rememberLangCheckbox.checked) {
                            localStorage.setItem('userLang', newLang);
                        } else {
                            localStorage.removeItem('userLang');
                        }
                    } else if (e.currentTarget.closest('#settings-dropdown')) {
                        // Logic for the settings dropdown (always saves the preference)
                         localStorage.setItem('userLang', newLang);
                         // Close the settings dropdown after selection
                         document.getElementById('settings-dropdown').classList.add('hidden');
                    }
                    
                    applyLanguage(newLang);
                });
            });


            // --- EXISTING HEADER/MENU LOGIC ---
            const header = document.querySelector('header');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const settingsButton = document.getElementById('settings-button');
            const settingsDropdown = document.getElementById('settings-dropdown');
            
            // Header scroll
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    header.classList.add('header-scrolled');
                } else {
                    header.classList.remove('header-scrolled');
                }
            });

            // Mobile menu toggle
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            // Close mobile menu on link click
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });

            // Settings dropdown toggle
            settingsButton.addEventListener('click', (e) => {
                e.stopPropagation();
                settingsDropdown.classList.toggle('hidden');
            });

            document.addEventListener('click', (e) => {
                if (!settingsDropdown.contains(e.target) && e.target !== settingsButton) {
                    settingsDropdown.classList.add('hidden');
                }
            });
            
            // --- EXISTING TESTIMONIAL SLIDER LOGIC ---
            const sliderTrack = document.getElementById('slider-track');
            const prevSlide = document.getElementById('prev-slide');
            const nextSlide = document.getElementById('next-slide');
            const slideWidth = document.querySelector('#slider-track > div').offsetWidth; // Assuming all slides are same width
            let currentSlide = 0;
            const totalSlides = sliderTrack.children.length;

            function updateSlider() {
                const offset = -currentSlide * slideWidth;
                sliderTrack.style.transform = `translateX(${offset}px)`;
            }

            nextSlide.addEventListener('click', () => {
                currentSlide = (currentSlide + 1) % totalSlides;
                updateSlider();
            });

            prevSlide.addEventListener('click', () => {
                currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
                updateSlider();
            });
            
            // --- EXISTING MAP AND GEOLOCATION LOGIC ---
            const mapElement = document.getElementById('map');
            const locationInput = document.getElementById('location-input');
            const searchBtn = document.getElementById('search-btn');
            const searchStatus = document.getElementById('search-status');
            const findNearestBtns = document.querySelectorAll('#header-find-machine-btn-desktop, #header-find-machine-btn-mobile, #find-nearest-btn');
            
            // Dummy machine locations in India (Lat, Lon)
            const machines = [
                { lat: 19.0760, lon: 72.8777, name: "FairVend Machine - Mumbai Central" },
                { lat: 28.6139, lon: 77.2090, name: "FairVend Machine - Connaught Place, Delhi" },
                { lat: 13.0827, lon: 80.2707, name: "FairVend Machine - Chennai Marina Beach" },
                { lat: 12.9716, lon: 77.5946, name: "FairVend Machine - Bangalore MG Road" },
            ];
            
            let map = null;
            let userMarker = null;

            function initMap() {
                map = L.map('map').setView([20.5937, 78.9629], 5); // Center of India, Zoom 5

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);

                machines.forEach(machine => {
                    const marker = L.marker([machine.lat, machine.lon]).addTo(map);
                    marker.bindPopup(`<b>${machine.name}</b>`).openPopup();
                });
                
                // Set the correct view for the map container
                map.invalidateSize();
            }

            function findNearest(userLat, userLon) {
                if (userMarker) {
                    map.removeLayer(userMarker);
                }
                
                // Add user location marker
                userMarker = L.marker([userLat, userLon], {
                    icon: L.divIcon({
                        className: 'user-location-marker',
                        html: '<svg class="w-8 h-8 text-red-500" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5S10.62 6.5 12 6.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></svg>',
                        iconSize: [32, 32],
                        iconAnchor: [16, 32]
                    })
                }).addTo(map);
                
                // Calculate distances and find nearest
                let nearest = null;
                let minDistance = Infinity;

                machines.forEach(machine => {
                    const distance = map.distance([userLat, userLon], [machine.lat, machine.lon]);
                    if (distance < minDistance) {
                        minDistance = distance;
                        nearest = machine;
                    }
                });
                
                if (nearest) {
                    const distanceInKm = (minDistance / 1000).toFixed(2);
                    searchStatus.textContent = `${translations[lang].findNearestSuccess} ${nearest.name} (${distanceInKm} km away).`;
                    map.setView([userLat, userLon], 12); // Zoom into the user's location
                    
                    // Pan and zoom to show both user and nearest machine
                    const bounds = L.latLngBounds([userLat, userLon], [nearest.lat, nearest.lon]);
                    map.fitBounds(bounds, { padding: [50, 50] });
                    
                } else {
                    searchStatus.textContent = translations[lang].findNearestError;
                    map.setView([userLat, userLon], 10);
                }
            }

            function getCoordinatesFromLocation(location) {
                searchStatus.textContent = translations[lang].findSearching;
                const nominatimUrl = `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(location)}&format=json&limit=1`;

                fetch(nominatimUrl)
                    .then(response => response.json())
                    .then(data => {
                        if (data && data.length > 0) {
                            const lat = parseFloat(data[0].lat);
                            const lon = parseFloat(data[0].lon);
                            findNearest(lat, lon);
                        } else {
                            searchStatus.textContent = translations[lang].findErrorNotFound;
                        }
                    })
                    .catch(() => {
                        searchStatus.textContent = translations[lang].findErrorFetch;
                    });
            }

            searchBtn.addEventListener('click', () => {
                const location = locationInput.value.trim();
                if (location) {
                    getCoordinatesFromLocation(location);
                } else {
                    searchStatus.textContent = translations[lang].findErrorEmpty;
                }
            });
            
            // Existing handler for find nearest buttons
            findNearestBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    document.getElementById('find-machine').scrollIntoView({ behavior: 'smooth' });
                    // Optional: auto-detect location here, but let's stick to the input for simplicity
                });
            });

            initMap();
            
            // --- EXISTING DONATION FORM LOGIC ---
            const donationForm = document.getElementById('donation-form');
            const donateBtn = document.getElementById('donate-btn');
            const donationAmountBtns = document.querySelectorAll('.donation-amount-btn');
            const customAmountInput = document.getElementById('custom-amount');
            const refreshCaptchaBtn = document.getElementById('refresh-captcha');
            const thankYouModal = document.getElementById('thank-you-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            
            let selectedAmount = 1000; // Default selected amount

            // Donation amount button click handler
            donationAmountBtns.forEach(button => {
                button.addEventListener('click', () => {
                    donationAmountBtns.forEach(b => {
                        b.classList.remove('bg-indigo-100', 'dark:bg-indigo-900/50', 'text-indigo-600', 'dark:text-indigo-400', 'ring-2', 'ring-indigo-300', 'dark:ring-indigo-600');
                        b.classList.add('border-slate-300', 'dark:border-slate-600');
                    });

                    button.classList.add('bg-indigo-100', 'dark:bg-indigo-900/50', 'text-indigo-600', 'dark:text-indigo-400', 'ring-2', 'ring-indigo-300', 'dark:ring-indigo-600');
                    button.classList.remove('border-slate-300', 'dark:border-slate-600');
                    
                    selectedAmount = parseInt(button.dataset.amount);
                    customAmountInput.value = ''; // Clear custom amount
                });
            });

            // Custom amount input handler
            customAmountInput.addEventListener('input', () => {
                const amount = parseInt(customAmountInput.value);
                if (amount >= 10) {
                    selectedAmount = amount;
                    donationAmountBtns.forEach(b => {
                        b.classList.remove('bg-indigo-100', 'dark:bg-indigo-900/50', 'text-indigo-600', 'dark:text-indigo-400', 'ring-2', 'ring-indigo-300', 'dark:ring-indigo-600');
                        b.classList.add('border-slate-300', 'dark:border-slate-600');
                    });
                } else {
                    selectedAmount = 0;
                }
            });
            
            // Form validation and submission
            donationForm.addEventListener('submit', (e) => {
                e.preventDefault();
                let isValid = true;
                const nameInput = document.getElementById('donor-name');
                const emailInput = document.getElementById('donor-email');
                const captchaInput = document.getElementById('captcha-input');
                const captchaText = document.getElementById('captcha-text').textContent;
                
                // Validation for Name
                if (nameInput.value.trim() === '') {
                    document.getElementById('name-error').classList.remove('hidden');
                    isValid = false;
                } else {
                    document.getElementById('name-error').classList.add('hidden');
                }

                // Validation for Email
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(emailInput.value.trim())) {
                    document.getElementById('email-error').classList.remove('hidden');
                    isValid = false;
                } else {
                    document.getElementById('email-error').classList.add('hidden');
                }

                // Validation for Amount
                if (selectedAmount === 0) {
                    // This is handled visually, but we can prevent submission if no amount is selected/entered.
                    isValid = false; 
                }

                // Validation for Captcha
                if (captchaInput.value.toLowerCase() !== captchaText.toLowerCase()) {
                    document.getElementById('captcha-error').classList.remove('hidden');
                    generateCaptcha(); // Refresh CAPTCHA on failure
                    isValid = false;
                } else {
                    document.getElementById('captcha-error').classList.add('hidden');
                }

                if (isValid) {
                   donateBtn.disabled = true;
                   donateBtn.innerHTML = '<svg class="animate-spin h-5 w-5 mr-3" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Processing...';

                   // Simulate API call delay
                   setTimeout(() => {
                       const name = nameInput.value.trim();
                       const amount = selectedAmount;

                       // Generate personalized thank you message
                       const thankYouNote = {
                            en: `You are the voice of FairVend, a charity in India. Write a short, heartfelt, and personalized thank you message to a donor named ${name.split(' ')[0]} who has just donated ₹${amount}. Mention the positive impact of their contribution. Keep it under 50 words.`,
                            hi: `आप फेयरवेंड की आवाज हैं, जो भारत में एक चैरिटी है। ${name.split(' ')[0]} नामक एक दाता को एक छोटा, हार्दिक और व्यक्तिगत धन्यवाद संदेश लिखें, जिन्होंने अभी-अभी ₹${amount} का दान दिया है। उनके योगदान के सकारात्मक प्रभाव का उल्लेख करें। इसे 50 शब्दों से कम रखें।`,
                            ta: `நீங்கள் ஃபேர்வென்டின் குரல், இந்தியாவில் ஒரு தொண்டு நிறுவனம். ₹${amount} நன்கொடை அளித்த ${name.split(' ')[0]} என்ற நன்கொடையாளருக்கு ஒரு குறிய, இதயப்பூர்வமான மற்றும் தனிப்பட்ட நன்றி செய்தியை எழுதுங்கள். அவர்களின் பங்களிப்பின் நேர்மறையான தாக்கத்தைக் குறிப்பிடவும். அதை 50 வார்த்தைகளுக்குள் வைத்திருங்கள்.`
                       }[lang];

                       // Placeholder for actual personalized message generation
                       const finalThankYouMessage = `Thank you, ${name.split(' ')[0]}, for your generous donation of ₹${amount}! Your support directly helps us provide essential goods with dignity to those who need it most.`;

                       showModal(finalThankYouMessage);
                       donationForm.reset();
                       donationAmountBtns.forEach(b => b.classList.remove('bg-indigo-100', 'dark:bg-indigo-900/50', 'ring-2', 'ring-indigo-300', 'dark:ring-indigo-600', 'text-indigo-600', 'dark:text-indigo-400'));
                       document.querySelector('[data-amount="1000"]').classList.add('bg-indigo-100', 'dark:bg-indigo-900/50', 'text-indigo-600', 'dark:text-indigo-400', 'ring-2', 'ring-indigo-300', 'dark:ring-indigo-600'); // Reset to default selected amount
                       selectedAmount = 1000;
                       generateCaptcha();
                       donateBtn.disabled = false;
                       donateBtn.innerHTML = translations[lang].donateBtnSecure;
                   }, 1500);
                }
            });

            closeModalBtn.addEventListener('click', hideModal);
            thankYouModal.addEventListener('click', (e) => { if (e.target === thankYouModal) hideModal(); });
            refreshCaptchaBtn.addEventListener('click', generateCaptcha);

            generateCaptcha();
        });
    </script>

</body>
</html>
