<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FairVend - Breaking Barriers to Essential Goods</title>
    
    <!-- Tailwind CSS for styling --><script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Leaflet.js for Maps --><link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- Google Fonts: Inter --><link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
        // Support for dark mode in Tailwind
        tailwind.config = {
          darkMode: 'class',
        }
    </script>
    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        #map {
            height: 500px;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            z-index: 10;
        }
        .leaflet-popup-content-wrapper {
            background-color: #fff;
            color: #333;
        }
        .dark .leaflet-popup-content-wrapper {
            background-color: #1f2937;
            color: #f3f4f6;
        }
        .dark .leaflet-tile-pane {
             filter: brightness(0.6) invert(1) contrast(3) hue-rotate(200deg) saturate(0.3) brightness(0.7);
        }
        /* Style for the CAPTCHA text */
        #captcha-text {
            user-select: none;
            text-decoration: line-through;
            font-style: italic;
        }
        /* Style for the user's location marker */
        .user-location-marker {
            filter: hue-rotate(180deg);
        }

        /* --- Creative Header Styles --- */
        .nav-link {
            position: relative;
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: #4f46e5; /* indigo-600 */
        }
        .dark .nav-link:hover {
            color: #818cf8; /* indigo-400 */
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #6366f1; /* indigo-500 */
            transition: width 0.3s ease;
        }
        .dark .nav-link::after {
            background-color: #818cf8; /* indigo-400 */
        }
        .nav-link:hover::after {
            width: 100%;
        }

        .header-scrolled {
            background-color: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .dark .header-scrolled {
            background-color: rgba(15, 23, 42, 0.95); /* slate-900 */
        }
        .header-scrolled nav {
            padding-top: 0.75rem;    /* py-3 */
            padding-bottom: 0.75rem; /* py-3 */
        }
        
        /* --- Static Gradient Styles --- */
        .btn-gradient {
            background-size: 100% auto;
            transition: filter 0.3s ease;
        }
        .btn-gradient:hover {
            filter: brightness(110%);
        }
        .btn-gradient-green {
             background-image: linear-gradient(to right, #4ade80, #34d399, #22c55e);
        }
        .btn-gradient-indigo {
             background-image: linear-gradient(to right, #818cf8, #6366f1, #4f46e5);
        }
        .card-gradient-indigo {
            background: linear-gradient(135deg, #ffffff 50%, #eef2ff); /* white to indigo-50 */
        }
        .dark .card-gradient-indigo {
             background: linear-gradient(135deg, #1f2937 50%, #312e81); /* slate-800 to indigo-900 */
        }
        .card-gradient-green {
            background: linear-gradient(135deg, #ffffff 50%, #f0fdf4); /* white to green-50 */
        }
        .dark .card-gradient-green {
             background: linear-gradient(135deg, #1f2937 50%, #14532d); /* slate-800 to green-900 */
        }
        .card-gradient-amber {
            background: linear-gradient(135deg, #ffffff 50%, #fffbeb); /* white to amber-50 */
        }
        .dark .card-gradient-amber {
             background: linear-gradient(135deg, #1f2937 50%, #78350f); /* slate-800 to amber-900 */
        }
        .slider-track {
            transition: transform 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 dark:bg-slate-900 dark:text-slate-200 transition-colors duration-300">
    
    <!-- Language Selection Modal -->
    <div id="language-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 max-w-sm w-full text-center">
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white" data-key="chooseLangTitle">Choose Your Language</h3>
            <p class="mt-2 text-slate-600 dark:text-slate-300" data-key="chooseLangSubtitle">Please select your preferred language.</p>
            <div class="mt-6 flex flex-col gap-4">
                <button class="lang-select-btn w-full bg-indigo-600 text-white font-semibold py-3 rounded-lg hover:bg-indigo-700 transition" data-lang="en">English</button>
                <button class="lang-select-btn w-full bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-semibold py-3 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition" data-lang="hi">हिन्दी (Hindi)</button>
                <button class="lang-select-btn w-full bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-semibold py-3 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition" data-lang="ta">தமிழ் (Tamil)</button>
            </div>
        </div>
    </div>


    <!-- Header Navigation --><header class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-lg sticky top-0 z-50 transition-all duration-300">
        <nav class="container mx-auto px-6 py-5 flex justify-between items-center transition-all duration-300">
            <div class="flex-1 flex justify-start">
                <a href="#" class="flex items-center gap-2 text-2xl font-bold">
                    <svg class="w-8 h-8 text-indigo-600 dark:text-indigo-400" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.001 4.52853C14.35 2.42 17.98 2.49 20.2426 4.75736C22.5053 7.02472 22.583 10.6356 20.4786 12.993L11.9999 21.485L3.52138 12.993C1.41705 10.6356 1.49472 7.02472 3.75736 4.75736C6.02 2.49 9.64999 2.42 12.001 4.52853Z"></path></svg>
                    <span class="hidden sm:inline text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-blue-500 dark:from-indigo-400 dark:to-blue-400">FairVend</span>
                </a>
            </div>
            
            <div class="hidden lg:flex items-center space-x-10 text-sm font-medium text-slate-600 dark:text-slate-300">
                <a href="#how-it-works" class="nav-link" data-key="navHowItWorks">How It Works</a>
                <a href="#impact" class="nav-link" data-key="navImpact">Impact</a>
                <a href="#find-machine" id="header-find-machine-btn-desktop" class="nav-link" data-key="navFindMachine">Find Nearest Machine</a>
            </div>

            <div class="flex-1 flex justify-end items-center gap-3 sm:gap-4">
                 <a href="#donate" class="bg-indigo-600 text-white font-semibold px-4 sm:px-5 py-2.5 rounded-lg hover:bg-indigo-700 transition-all shadow-sm hover:shadow-md text-sm" data-key="navDonateNow">Donate Now</a>
                
                 <!-- Settings Dropdown -->
                <div class="relative">
                    <button id="settings-button" class="p-2 rounded-md text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700">
                         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    </button>
                    <div id="settings-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50">
                        <div class="px-4 py-2 text-xs font-semibold text-slate-400" data-key="prefLang">Language</div>
                        <a href="#" class="block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 lang-select-btn" data-lang="en">English</a>
                        <a href="#" class="block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 lang-select-btn" data-lang="hi">हिन्दी</a>
                        <a href="#" class="block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 lang-select-btn" data-lang="ta">தமிழ்</a>
                        <div class="border-t border-slate-200 dark:border-slate-700 my-1"></div>
                        <div class="px-4 py-2 text-xs font-semibold text-slate-400" data-key="prefTheme">Theme</div>
                        <div class="flex justify-around py-1">
                            <button id="theme-light-btn" class="theme-select-btn p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700">
                                <svg class="w-5 h-5 text-slate-700 dark:text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                            </button>
                             <button id="theme-dark-btn" class="theme-select-btn p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700">
                                <svg class="w-5 h-5 text-slate-700 dark:text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                            </button>
                        </div>
                    </div>
                </div>

                 <button id="mobile-menu-button" class="lg:hidden text-slate-600 dark:text-slate-300 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <!-- Mobile Menu --><div id="mobile-menu" class="hidden lg:hidden px-6 pb-4">
            <a href="#how-it-works" class="block py-2 text-slate-600 dark:text-slate-300" data-key="navHowItWorks_mobile">How It Works</a>
            <a href="#impact" class="block py-2 text-slate-600 dark:text-slate-300" data-key="navImpact_mobile">Impact</a>
            <a href="#find-machine" id="header-find-machine-btn-mobile" class="block py-2 text-slate-600 dark:text-slate-300" data-key="navFindMachine_mobile">Find Nearest Machine</a>
        </div>
    </header>

    <main>
        <!-- Hero Section --><section class="relative bg-slate-800">
            <div class="absolute inset-0">
                <img src="https://images.unsplash.com/photo-1593113598332-cd288d649433?q=80&w=2070&auto=format&fit=crop" alt="A person giving food to someone in need" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-slate-900/70"></div>
            </div>
            <div class="relative container mx-auto px-6 py-24 md:py-40 text-center text-white">
                <div class="flex justify-center items-center gap-4">
                    <div class="bg-white/10 backdrop-blur-sm rounded-full px-4 py-2 text-sm font-medium" data-key="fundedAmount">₹2.5M+ Funded</div>
                    <div class="bg-white/10 backdrop-blur-sm rounded-full px-4 py-2 text-sm font-medium" data-key="livesImpacted">50,000+ Lives Impacted</div>
                </div>
                <h1 class="mt-8 text-4xl md:text-6xl font-extrabold leading-tight">
                    <span data-key="heroTitle1">Breaking</span> <span class="text-amber-400" data-key="heroTitle2">Barriers</span> <span data-key="heroTitle3">to Essential Goods</span>
                </h1>
                <p class="mt-6 max-w-3xl mx-auto text-lg text-slate-300" data-key="heroSubtitle">Color-coded discount cards connecting those in need to affordable essentials. Your donation helps us provide up to 50% discounts at vending machines across the community.</p>
                <div class="mt-10 flex flex-col sm:flex-row justify-center items-center gap-4">
                    <a href="#find-machine" id="find-nearest-btn" class="w-full sm:w-auto btn-gradient btn-gradient-indigo text-white font-semibold px-8 py-3 rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-1" data-key="heroBtnFind">Find Nearest Machine</a>
                    <a href="#donate" class="w-full sm:w-auto bg-slate-100/20 text-white font-semibold px-8 py-3 rounded-lg hover:bg-slate-100/30 transition-all ring-1 ring-inset ring-white/30 shadow-sm hover:shadow-md" data-key="heroBtnDonate">Make a Donation</a>
                </div>
            </div>
        </section>
        
        <!-- Impact Section --><section id="impact" class="py-20 md:py-28 bg-gradient-to-b from-slate-50 to-white dark:from-slate-900 dark:to-slate-800/50">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white" data-key="impactTitle">Our Collective Impact</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-slate-600 dark:text-slate-300" data-key="impactSubtitle">Transparency is at the heart of what we do. See how your contributions are making a tangible difference in real-time.</p>
                </div>
                <div class="max-w-4xl mx-auto mt-16 grid grid-cols-1 md:grid-cols-2 gap-8 text-center">
                    <div class="bg-slate-100 dark:bg-slate-800 p-8 rounded-2xl">
                        <div class="text-5xl font-extrabold text-indigo-600 dark:text-indigo-400">₹2.5M+</div>
                        <div class="mt-2 text-lg font-semibold text-slate-700 dark:text-slate-300" data-key="impactFundsTitle">Total Funds Raised</div>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="impactFundsDesc">From thousands of generous donors across the country.</p>
                    </div>
                     <div class="bg-slate-100 dark:bg-slate-800 p-8 rounded-2xl">
                        <div class="text-5xl font-extrabold text-green-600 dark:text-green-400">50,000+</div>
                        <div class="mt-2 text-lg font-semibold text-slate-700 dark:text-slate-300" data-key="impactPeopleTitle">Individuals Supported</div>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="impactPeopleDesc">Provided with essential goods through our vending network.</p>
                    </div>
                </div>

                <!-- Testimonials Slider -->
                <div class="mt-20">
                    <h3 class="text-2xl md:text-3xl font-bold text-center text-slate-900 dark:text-white" data-key="testimonialsTitle">Stories from Our Community</h3>
                    <div class="relative max-w-2xl mx-auto mt-8">
                        <div class="overflow-hidden">
                            <div id="slider-track" class="flex slider-track">
                                <!-- Slide 1 -->
                                <div class="w-full flex-shrink-0 px-4">
                                    <div class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg text-center">
                                        <div class="text-amber-400 flex justify-center gap-1 mb-4">
                                            <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                        </div>
                                        <p class="text-slate-600 dark:text-slate-300 italic" data-key="testimonial1Text">"As a student, every rupee matters. The FairVend card has been a blessing, helping me buy snacks and essentials without worrying. It feels like someone cares."</p>
                                        <div class="mt-4 font-bold text-slate-800 dark:text-slate-100" data-key="testimonial1Name">- Ananya, Student from Mumbai</div>
                                    </div>
                                </div>
                                <!-- Slide 2 -->
                                <div class="w-full flex-shrink-0 px-4">
                                     <div class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg text-center">
                                        <div class="text-amber-400 flex justify-center gap-1 mb-4">
                                            <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                        </div>
                                        <p class="text-slate-600 dark:text-slate-300 italic" data-key="testimonial2Text">"After a long day of work, having access to affordable drinks and sanitary products for my daughter is a huge relief. Thank you, FairVend, for your support."</p>
                                        <div class="mt-4 font-bold text-slate-800 dark:text-slate-100" data-key="testimonial2Name">- Rajesh, Worker from Delhi</div>
                                    </div>
                                </div>
                                <!-- Slide 3 -->
                                <div class="w-full flex-shrink-0 px-4">
                                     <div class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg text-center">
                                        <div class="text-amber-400 flex justify-center gap-1 mb-4">
                                            <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                        </div>
                                        <p class="text-slate-600 dark:text-slate-300 italic" data-key="testimonial3Text">"The dignity this program provides is immeasurable. Getting essentials for my family without feeling like I'm asking for a handout has made all the difference."</p>
                                        <div class="mt-4 font-bold text-slate-800 dark:text-slate-100" data-key="testimonial3Name">- Priya, Mother from Chennai</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button id="prev-slide" class="absolute top-1/2 -translate-y-1/2 left-0 -translate-x-12 p-2 rounded-full bg-white/50 dark:bg-slate-700/50 hover:bg-white dark:hover:bg-slate-700 transition">
                            <svg class="w-6 h-6 text-slate-700 dark:text-slate-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                        </button>
                         <button id="next-slide" class="absolute top-1/2 -translate-y-1/2 right-0 translate-x-12 p-2 rounded-full bg-white/50 dark:bg-slate-700/50 hover:bg-white dark:hover:bg-slate-700 transition">
                            <svg class="w-6 h-6 text-slate-700 dark:text-slate-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </button>
                    </div>
                </div>

            </div>
        </section>

        <!-- How It Works Section --><section id="how-it-works" class="py-20 md:py-28">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white" data-key="howTitle">A Simple System for a Big Impact</h2>
                <p class="mt-4 max-w-2xl mx-auto text-slate-600 dark:text-slate-300" data-key="howSubtitle">We believe in direct, transparent, and dignified support. Here’s how our color-coded discount system works.</p>
                <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-10 md:gap-8">
                    <!-- Step 1 --><div class="card-gradient-indigo p-8 rounded-2xl shadow-lg hover:shadow-xl dark:hover:shadow-indigo-500/10 transition-shadow transform hover:-translate-y-2">
                        <div class="bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 w-16 h-16 rounded-full flex items-center justify-center mx-auto">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
                        </div>
                        <h3 class="mt-6 text-xl font-bold dark:text-white" data-key="howStep1Title">Get Your Card</h3>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="howStep1Desc">In partnership with local NGOs, we distribute FairVend cards. Each color represents a different level of support.</p>
                    </div>
                    <!-- Step 2 --><div class="card-gradient-green p-8 rounded-2xl shadow-lg hover:shadow-xl dark:hover:shadow-green-500/10 transition-shadow transform hover:-translate-y-2">
                        <div class="bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 w-16 h-16 rounded-full flex items-center justify-center mx-auto">
                             <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                        </div>
                        <h3 class="mt-6 text-xl font-bold dark:text-white" data-key="howStep2Title">Scan the Color</h3>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="howStep2Desc">Simply show your card to the vending machine's scanner. Our system instantly recognizes and applies the discount.</p>
                    </div>
                    <!-- Step 3 --><div class="card-gradient-amber p-8 rounded-2xl shadow-lg hover:shadow-xl dark:hover:shadow-amber-500/10 transition-shadow transform hover:-translate-y-2">
                        <div class="bg-amber-100 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400 w-16 h-16 rounded-full flex items-center justify-center mx-auto">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M12 6h.01M6 12h.01M18 12h.01M7 7h.01M17 7h.01M7 17h.01M17 17h.01"></path></svg>
                        </div>
                        <h3 class="mt-6 text-xl font-bold dark:text-white" data-key="howStep3Title">Receive Your Discount</h3>
                        <p class="mt-2 text-slate-500 dark:text-slate-400" data-key="howStep3Desc">Your discount is funded by generous donors, providing essential items at a more affordable price.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Find a Machine Section --><section id="find-machine" class="py-20 md:py-28">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white" data-key="findTitle">Find a FairVend Machine Near You</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-slate-600 dark:text-slate-300" data-key="findSubtitle">Enter your area or city to locate the closest machine and get directions.</p>
                </div>
                <div class="max-w-4xl mx-auto mt-12">
                    <div class="flex flex-col sm:flex-row gap-4 mb-6">
                        <input id="location-input" type="text" data-key-placeholder="findPlaceholder" placeholder="e.g., 'Mumbai' or 'Connaught Place, Delhi'" class="flex-grow w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none transition bg-white dark:bg-slate-800">
                        <button id="search-btn" class="w-full sm:w-auto bg-indigo-600 text-white font-semibold px-8 py-3 rounded-lg hover:bg-indigo-700 transition-all shadow-sm hover:shadow-md" data-key="findBtnSearch">Search</button>
                    </div>
                    <p id="search-status" class="text-center text-slate-500 dark:text-slate-400 min-h-[1.5rem]"></p>
                    <div id="map" class="mt-4"></div>
                </div>
            </div>
        </section>

        <!-- Donation Section --><section id="donate" class="py-20 md:py-28 bg-gradient-to-b from-white to-indigo-50 dark:from-slate-800/50 dark:to-slate-900">
             <div class="container mx-auto px-6">
                 <div class="max-w-3xl mx-auto text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white" data-key="donateTitle">Support Our Mission</h2>
                    <p class="mt-4 text-slate-600 dark:text-slate-300" data-key="donateSubtitle">Your contribution directly funds the discounts we provide. Every donation helps someone in need access essential products with dignity.</p>
                </div>

                <div class="max-w-lg mx-auto mt-12 bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl">
                    <form id="donation-form" novalidate>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mb-6">
                            <div>
                                <label for="donor-name" class="block text-sm font-medium text-slate-700 dark:text-slate-300" data-key="donateLabelName">Full Name</label>
                                <input type="text" id="donor-name" class="mt-1 block w-full rounded-md border-slate-300 dark:border-slate-600 py-3 px-4 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" data-key-placeholder="donatePlaceholderName" placeholder="Priya Sharma" required>
                                <p id="name-error" class="hidden text-red-500 text-sm mt-1" data-key="donateErrorName">Please enter your full name.</p>
                            </div>
                            <div>
                                <label for="donor-email" class="block text-sm font-medium text-slate-700 dark:text-slate-300" data-key="donateLabelEmail">Email Address</label>
                                <input type="email" id="donor-email" class="mt-1 block w-full rounded-md border-slate-300 dark:border-slate-600 py-3 px-4 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" data-key-placeholder="donatePlaceholderEmail" placeholder="you@example.com" required>
                                <p id="email-error" class="hidden text-red-500 text-sm mt-1" data-key="donateErrorEmail">Please enter a valid email.</p>
                            </div>
                        </div>

                        <p class="text-sm font-medium text-slate-700 dark:text-slate-300 mb-2" data-key="donateSelectAmount">Select an amount</p>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                            <button type="button" class="donation-amount-btn border border-slate-300 dark:border-slate-600 rounded-lg py-3 text-lg font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition" data-amount="100">₹100</button>
                            <button type="button" class="donation-amount-btn border border-slate-300 dark:border-slate-600 rounded-lg py-3 text-lg font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition" data-amount="250">₹250</button>
                            <button type="button" class="donation-amount-btn border border-slate-300 dark:border-slate-600 rounded-lg py-3 text-lg font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition" data-amount="500">₹500</button>
                            <button type="button" class="donation-amount-btn border border-slate-300 dark:border-slate-600 rounded-lg py-3 text-lg font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition" data-amount="1000">₹1000</button>
                        </div>
                        <div class="mt-6">
                            <label for="custom-amount" class="block text-sm font-medium text-slate-700 dark:text-slate-300" data-key="donateCustomAmount">Or enter a custom amount</label>
                            <div class="mt-1 relative rounded-md shadow-sm">
                                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                                    <span class="text-slate-500 sm:text-sm">₹</span>
                                </div>
                                <input type="number" name="custom-amount" id="custom-amount" class="block w-full rounded-md border-slate-300 dark:border-slate-600 pl-7 pr-12 py-3 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" placeholder="0.00">
                            </div>
                            <p id="amount-error" class="hidden text-red-500 text-sm mt-1" data-key="donateErrorAmount">Please select or enter a valid amount.</p>
                        </div>
                        
                        <!-- CAPTCHA Section --><div class="mt-6">
                            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300" data-key="donateCaptchaLabel">Please verify you are human</label>
                            <div class="flex items-center gap-4 mt-1">
                                <div id="captcha-text" class="px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-md font-mono text-2xl tracking-widest"></div>
                                <button type="button" id="refresh-captcha" title="Refresh CAPTCHA" class="p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path></svg>
                                </button>
                            </div>
                            <input type="text" id="captcha-input" class="mt-2 block w-full rounded-md border-slate-300 dark:border-slate-600 py-3 px-4 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-white dark:bg-slate-700" data-key-placeholder="donateCaptchaPlaceholder" placeholder="Enter text from the image" required>
                            <p id="captcha-error" class="hidden text-red-500 text-sm mt-1" data-key="donateErrorCaptcha">Incorrect CAPTCHA. Please try again.</p>
                        </div>

                        <button id="donate-btn" type="submit" class="mt-8 w-full btn-gradient btn-gradient-green text-white text-lg font-bold py-4 rounded-lg shadow-md hover:shadow-lg" data-key="donateBtnSecure">Donate Securely</button>
                    </form>
                </div>
             </div>
        </section>
    </main>

    <!-- Footer --><footer class="bg-slate-800 text-slate-300 pt-16 pb-8">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 md:gap-8">
                <!-- Column 1: Brand --><div class="md:col-span-2 lg:col-span-1">
                    <a href="#" class="flex items-center gap-2 text-2xl font-bold text-white">
                        <svg class="w-8 h-8 text-indigo-400" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.001 4.52853C14.35 2.42 17.98 2.49 20.2426 4.75736C22.5053 7.02472 22.583 10.6356 20.4786 12.993L11.9999 21.485L3.52138 12.993C1.41705 10.6356 1.49472 7.02472 3.75736 4.75736C6.02 2.49 9.64999 2.42 12.001 4.52853Z"></path></svg>
                        <span>FairVend</span>
                    </a>
                    <p class="mt-4 text-slate-400 text-sm max-w-xs" data-key="footerDesc">Fair access to essential goods through community-powered discounts.</p>
                </div>

                <!-- Column 2: Quick Links --><div>
                    <h3 class="font-semibold text-white tracking-wider" data-key="footerQuickLinks">Quick Links</h3>
                    <ul class="mt-4 space-y-3 text-sm">
                        <li><a href="#how-it-works" class="text-slate-400 hover:text-white transition-colors" data-key="footerLinkHow">How It Works</a></li>
                        <li><a href="#find-machine" class="text-slate-400 hover:text-white transition-colors" data-key="footerLinkFind">Find Machine</a></li>
                        <li><a href="#donate" class="text-slate-400 hover:text-white transition-colors" data-key="footerLinkDonate">Donate</a></li>
                        <li><a href="#impact" class="text-slate-400 hover:text-white transition-colors" data-key="footerLinkImpact">Our Impact</a></li>
                    </ul>
                </div>

                <!-- Column 3: Contact --><div>
                    <h3 class="font-semibold text-white tracking-wider" data-key="footerContact">Contact</h3>
                    <ul class="mt-4 space-y-3 text-sm">
                        <li class="flex items-start gap-3">
                            <svg class="w-5 h-5 mt-0.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                            <a href="mailto:help@fairvend.org" class="text-slate-400 hover:text-white transition-colors">help@fairvend.org</a>
                        </li>
                         <li class="flex items-start gap-3">
                            <svg class="w-5 h-5 mt-0.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                            <span class="text-slate-400">+91 1800-123-4567</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <svg class="w-5 h-5 mt-0.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                            <span class="text-slate-400" data-key="footerLocation">Bangalore, India</span>
                        </li>
                    </ul>
                </div>
                
                <!-- Column 4: Newsletter --><div>
                    <h3 class="font-semibold text-white tracking-wider" data-key="footerUpdates">Get Impact Updates</h3>
                    <form class="mt-4 flex">
                        <input type="email" data-key-placeholder="footerEmailPlaceholder" placeholder="your@email.com" class="w-full rounded-l-md border-0 py-2.5 px-3 text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-inset focus:ring-indigo-500 text-sm">
                        <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-4 rounded-r-md transition-colors text-sm" data-key="footerSubscribe">Subscribe</button>
                    </form>
                    <div class="mt-4 flex gap-4">
                        <div class="bg-slate-700 text-slate-300 text-xs font-semibold px-3 py-1.5 rounded-md" data-key="footerTagNGO">Registered NGO</div>
                        <div class="bg-slate-700 text-slate-300 text-xs font-semibold px-3 py-1.5 rounded-md" data-key="footerTagTransparent">100% Transparent</div>
                    </div>
                </div>
            </div>

            <hr class="my-8 border-slate-700">

            <div class="text-center text-sm text-slate-400">
                <span data-key="footerRights">© 2025 FairVend. All rights reserved.</span>
                <span class="mx-2">|</span>
                <span data-key="footerSlogan">Making essential goods accessible to everyone.</span>
            </div>
        </div>
    </footer>
    
    <!-- Thank You Modal --><div id="thank-you-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 max-w-sm w-full text-center transform transition-all scale-95 opacity-0">
            <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/50">
                <svg class="h-6 w-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
            </div>
            <h3 class="text-2xl font-bold mt-4 text-slate-900 dark:text-white" data-key="modalThankYou">Thank You!</h3>
            <p id="thank-you-message" class="mt-2 text-slate-600 dark:text-slate-300" data-key="modalMessage">Your generous donation will make a real difference.</p>
            <button id="close-modal-btn" class="mt-6 w-full bg-indigo-600 text-white font-semibold py-2 rounded-lg hover:bg-indigo-700 transition" data-key="modalClose">Close</button>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function () {

            // --- TRANSLATION SCRIPT ---

            const translations = {
                en: {
                    // Language Modal & Prefs
                    chooseLangTitle: "Choose Your Language",
                    chooseLangSubtitle: "Please select your preferred language.",
                    prefLang: "Language",
                    prefTheme: "Theme",
                    // Nav
                    navHowItWorks: "How It Works",
                    navImpact: "Impact",
                    navFindMachine: "Find Nearest Machine",
                    navDonateNow: "Donate Now",
                    navHowItWorks_mobile: "How It Works",
                    navFindMachine_mobile: "Find Nearest Machine",
                    navImpact_mobile: "Impact",
                    // Hero
                    fundedAmount: "₹2.5M+ Funded",
                    livesImpacted: "50,000+ Lives Impacted",
                    heroTitle1: "Breaking",
                    heroTitle2: "Barriers",
                    heroTitle3: "to Essential Goods",
                    heroSubtitle: "Color-coded discount cards connecting those in need to affordable essentials. Your donation helps us provide up to 50% discounts at vending machines across the community.",
                    heroBtnFind: "Find Nearest Machine",
                    heroBtnDonate: "Make a Donation",
                    // How it Works
                    howTitle: "A Simple System for a Big Impact",
                    howSubtitle: "We believe in direct, transparent, and dignified support. Here’s how our color-coded discount system works.",
                    howStep1Title: "Get Your Card",
                    howStep1Desc: "In partnership with local NGOs, we distribute FairVend cards. Each color represents a different level of support.",
                    howStep2Title: "Scan the Color",
                    howStep2Desc: "Simply show your card to the vending machine's scanner. Our system instantly recognizes and applies the discount.",
                    howStep3Title: "Receive Your Discount",
                    howStep3Desc: "Your discount is funded by generous donors, providing essential items at a more affordable price.",
                    // Impact
                    impactTitle: "Our Collective Impact",
                    impactSubtitle: "Transparency is at the heart of what we do. See how your contributions are making a tangible difference in real-time.",
                    impactFundsTitle: "Total Funds Raised",
                    impactFundsDesc: "From thousands of generous donors across the country.",
                    impactPeopleTitle: "Individuals Supported",
                    impactPeopleDesc: "Provided with essential goods through our vending network.",
                    testimonialsTitle: "Stories from Our Community",
                    testimonial1Text: "\"As a student, every rupee matters. The FairVend card has been a blessing, helping me buy snacks and essentials without worrying. It feels like someone cares.\"",
                    testimonial1Name: "- Ananya, Student from Mumbai",
                    testimonial2Text: "\"After a long day of work, having access to affordable drinks and sanitary products for my daughter is a huge relief. Thank you, FairVend, for your support.\"",
                    testimonial2Name: "- Rajesh, Worker from Delhi",
                    testimonial3Text: "\"The dignity this program provides is immeasurable. Getting essentials for my family without feeling like I'm asking for a handout has made all the difference.\"",
                    testimonial3Name: "- Priya, Mother from Chennai",
                    // Find Machine
                    findTitle: "Find a FairVend Machine Near You",
                    findSubtitle: "Enter your area or city to locate the closest machine and get directions.",
                    findPlaceholder: "e.g., 'Mumbai' or 'Connaught Place, Delhi'",
                    findBtnSearch: "Search",
                    // Donate
                    donateTitle: "Support Our Mission",
                    donateSubtitle: "Your contribution directly funds the discounts we provide. Every donation helps someone in need access essential products with dignity.",
                    donateLabelName: "Full Name",
                    donatePlaceholderName: "Priya Sharma",
                    donateErrorName: "Please enter your full name.",
                    donateLabelEmail: "Email Address",
                    donatePlaceholderEmail: "you@example.com",
                    donateErrorEmail: "Please enter a valid email.",
                    donateSelectAmount: "Select an amount",
                    donateCustomAmount: "Or enter a custom amount",
                    donateErrorAmount: "Please select or enter a valid amount.",
                    donateCaptchaLabel: "Please verify you are human",
                    donateCaptchaPlaceholder: "Enter text from the image",
                    donateErrorCaptcha: "Incorrect CAPTCHA. Please try again.",
                    donateBtnSecure: "Donate Securely",
                    // Footer
                    footerDesc: "Fair access to essential goods through community-powered discounts.",
                    footerQuickLinks: "Quick Links",
                    footerLinkHow: "How It Works",
                    footerLinkFind: "Find Machine",
                    footerLinkDonate: "Donate",
                    footerLinkImpact: "Our Impact",
                    footerContact: "Contact",
                    footerLocation: "Bangalore, India",
                    footerUpdates: "Get Impact Updates",
                    footerEmailPlaceholder: "your@email.com",
                    footerSubscribe: "Subscribe",
                    footerTagNGO: "Registered NGO",
                    footerTagTransparent: "100% Transparent",
                    footerRights: "© 2025 FairVend. All rights reserved.",
                    footerSlogan: "Making essential goods accessible to everyone.",
                    // Modal
                    modalThankYou: "Thank You!",
                    modalMessage: "Your generous donation will make a real difference.",
                    modalClose: "Close",
                },
                hi: {
                    chooseLangTitle: "अपनी भाषा चुनें",
                    chooseLangSubtitle: "कृपया अपनी पसंदीदा भाषा चुनें।",
                    prefLang: "भाषा",
                    prefTheme: "थीम",
                    navHowItWorks: "यह कैसे काम करता है",
                    navImpact: "प्रभाव",
                    navFindMachine: "निकटतम मशीन खोजें",
                    navDonateNow: "अब दान करें",
                    navHowItWorks_mobile: "यह कैसे काम करता है",
                    navFindMachine_mobile: "निकटतम मशीन खोजें",
                    navImpact_mobile: "प्रभाव",
                    fundedAmount: "₹2.5M+ वित्त पोषित",
                    livesImpacted: "50,000+ जीवन प्रभावित",
                    heroTitle1: "आवश्यक वस्तुओं की",
                    heroTitle2: "बाधाओं",
                    heroTitle3: "को तोड़ना",
                    heroSubtitle: "रंग-कोडित डिस्काउंट कार्ड ज़रूरतमंदों को सस्ती आवश्यक वस्तुओं से जोड़ते हैं। आपका दान हमें समुदाय भर में वेंडिंग मशीनों पर 50% तक की छूट प्रदान करने में मदद करता है।",
                    heroBtnFind: "निकटतम मशीन खोजें",
                    heroBtnDonate: "दान करें",
                    howTitle: "एक बड़े प्रभाव के लिए एक सरल प्रणाली",
                    howSubtitle: "हम प्रत्यक्ष, पारदर्शी और सम्मानजनक समर्थन में विश्वास करते हैं। यहाँ बताया गया है कि हमारी रंग-कोडित छूट प्रणाली कैसे काम करती है।",
                    howStep1Title: "अपना कार्ड प्राप्त करें",
                    howStep1Desc: "स्थानीय गैर-सरकारी संगठनों के साथ साझेदारी में, हम फेयरवेंड कार्ड वितरित करते हैं। प्रत्येक रंग समर्थन के एक अलग स्तर का प्रतिनिधित्व करता है।",
                    howStep2Title: "रंग स्कैन करें",
                    howStep2Desc: "बस अपना कार्ड वेंडिंग मशीन के स्कैनर को दिखाएं। हमारा सिस्टम तुरंत पहचानता है और छूट लागू करता है।",
                    howStep3Title: "अपनी छूट प्राप्त करें",
                    howStep3Desc: "आपकी छूट उदार दाताओं द्वारा वित्त पोषित है, जो अधिक सस्ती कीमत पर आवश्यक वस्तुएं प्रदान करती है।",
                    impactTitle: "हमारा सामूहिक प्रभाव",
                    impactSubtitle: "पारदर्शिता हमारे काम के केंद्र में है। देखें कि आपके योगदान वास्तविक समय में कैसे ठोस अंतर ला रहे हैं।",
                    impactFundsTitle: "कुल जुटाई गई धनराशि",
                    impactFundsDesc: "देश भर के हजारों उदार दाताओं से।",
                    impactPeopleTitle: "समर्थित व्यक्ति",
                    impactPeopleDesc: "हमारे वेंडिंग नेटवर्क के माध्यम से आवश्यक सामान प्रदान किया गया।",
                    testimonialsTitle: "हमारे समुदाय की कहानियाँ",
                    testimonial1Text: "\"एक छात्र के रूप में, हर रुपया मायने रखता है। फेयरवेंड कार्ड एक वरदान रहा है, जो मुझे बिना किसी चिंता के नाश्ता और आवश्यक सामान खरीदने में मदद करता है। ऐसा लगता है कि कोई परवाह करता है।\"",
                    testimonial1Name: "- अनन्या, मुंबई की छात्रा",
                    testimonial2Text: "\"दिन भर की मेहनत के बाद, मेरी बेटी के लिए सस्ते पेय और सैनिटरी उत्पाद उपलब्ध होना एक बड़ी राहत है। आपके समर्थन के लिए धन्यवाद, फेयरवेंड।\"",
                    testimonial2Name: "- राजेश, दिल्ली के मजदूर",
                    testimonial3Text: "\"यह कार्यक्रम जो सम्मान प्रदान करता है वह अथाह है। बिना यह महसूस किए कि मैं भिक्षा मांग रही हूं, अपने परिवार के लिए आवश्यक वस्तुएं प्राप्त करने से बहुत फर्क पड़ा है।\"",
                    testimonial3Name: "- प्रिया, चेन्नई से माँ",
                    findTitle: "अपने पास एक फेयरवेंड मशीन खोजें",
                    findSubtitle: "निकटतम मशीन का पता लगाने और दिशा-निर्देश प्राप्त करने के लिए अपना क्षेत्र या शहर दर्ज करें।",
                    findPlaceholder: "जैसे, 'मुंबई' या 'कनॉट प्लेस, दिल्ली'",
                    findBtnSearch: "खोज",
                    donateTitle: "हमारे मिशन का समर्थन करें",
                    donateSubtitle: "आपका योगदान सीधे हमारे द्वारा प्रदान की जाने वाली छूटों को निधि देता है। हर दान किसी जरूरतमंद को सम्मान के साथ आवश्यक उत्पादों तक पहुंचने में मदद करता है।",
                    donateLabelName: "पूरा नाम",
                    donatePlaceholderName: "प्रिया शर्मा",
                    donateErrorName: "कृपया अपना पूरा नाम दर्ज करें।",
                    donateLabelEmail: "ईमेल पता",
                    donatePlaceholderEmail: "you@example.com",
                    donateErrorEmail: "कृपया एक वैध ईमेल दर्ज करें।",
                    donateSelectAmount: "एक राशि चुनें",
                    donateCustomAmount: "या एक कस्टम राशि दर्ज करें",
                    donateErrorAmount: "कृपया एक वैध राशि चुनें या दर्ज करें।",
                    donateCaptchaLabel: "कृपया सत्यापित करें कि आप इंसान हैं",
                    donateCaptchaPlaceholder: "छवि से टेक्स्ट दर्ज करें",
                    donateErrorCaptcha: "गलत कैप्चा। कृपया पुन: प्रयास करें।",
                    donateBtnSecure: "सुरक्षित रूप से दान करें",
                    footerDesc: "समुदाय-संचालित छूट के माध्यम से आवश्यक वस्तुओं तक उचित पहुंच।",
                    footerQuickLinks: "त्वरित सम्पकॅ",
                    footerLinkHow: "यह कैसे काम करता है",
                    footerLinkFind: "मशीन खोजें",
                    footerLinkDonate: "दान करें",
                    footerLinkImpact: "हमारा प्रभाव",
                    footerContact: "संपर्क",
                    footerLocation: "बेंगलुरु, भारत",
                    footerUpdates: "प्रभाव अपडेट प्राप्त करें",
                    footerEmailPlaceholder: "your@email.com",
                    footerSubscribe: "सदस्यता लें",
                    footerTagNGO: "पंजीकृत एनजीओ",
                    footerTagTransparent: "100% पारदर्शी",
                    footerRights: "© 2025 फेयरवेंड। सर्वाधिकार सुरक्षित।",
                    footerSlogan: "आवश्यक वस्तुओं को सभी के लिए सुलभ बनाना।",
                    modalThankYou: "धन्यवाद!",
                    modalMessage: "आपका उदार दान एक वास्तविक अंतर लाएगा।",
                    modalClose: "बंद करें",
                },
                ta: {
                    chooseLangTitle: "உங்கள் மொழியைத் தேர்ந்தெடுக்கவும்",
                    chooseLangSubtitle: "దయచేసి మీకు ఇష్టమైన భాషను ఎంచుకోండి.",
                    prefLang: "மொழி",
                    prefTheme: "தீம்",
                    navHowItWorks: "எப்படி செயல்படுகிறது",
                    navImpact: "தாக்கம்",
                    navFindMachine: "அருகிலுள்ள இயந்திரத்தைக் கண்டறியவும்",
                    navDonateNow: "இப்போது நன்கொடையளிக்கவும்",
                    navHowItWorks_mobile: "எப்படி செயல்படுகிறது",
                    navFindMachine_mobile: "அருகிலுள்ள இயந்திரத்தைக் கண்டறியவும்",
                    navImpact_mobile: "தாக்கம்",
                    fundedAmount: "₹2.5M+ நிதி திரட்டப்பட்டது",
                    livesImpacted: "50,000+ உயிர்கள் பாதிக்கப்பட்டுள்ளன",
                    heroTitle1: "அத்தியாவசியப் பொருட்களுக்கான",
                    heroTitle2: "தடைகளைத்",
                    heroTitle3: "தகர்ப்பது",
                    heroSubtitle: "தேவையுள்ளவர்களை மலிவு விலையில் அத்தியாவசியப் பொருட்களுடன் இணைக்கும் வண்ண-குறியிடப்பட்ட தள்ளுபடி அட்டைகள். உங்கள் நன்கொடை சமூகம் முழுவதும் உள்ள விற்பனை இயந்திரங்களில் 50% வரை தள்ளுபடி வழங்க உதவுகிறது.",
                    heroBtnFind: "அருகிலுள்ள இயந்திரத்தைக் கண்டறியவும்",
                    heroBtnDonate: "நன்கொடை அளியுங்கள்",
                    howTitle: "ஒரு பெரிய தாக்கத்திற்கான ஒரு எளிய அமைப்பு",
                    howSubtitle: "நேரடி, வெளிப்படையான மற்றும் கண்ணியமான ஆதரவை நாங்கள் நம்புகிறோம். எங்கள் வண்ண-குறியிடப்பட்ட தள்ளுபடி அமைப்பு எவ்வாறு செயல்படுகிறது என்பது இங்கே.",
                    howStep1Title: "உங்கள் அட்டையைப் பெறுங்கள்",
                    howStep1Desc: "உள்ளூர் தன்னார்வ தொண்டு நிறுவனங்களுடன் இணைந்து, நாங்கள் ஃபேர்வென்ட் கார்டுகளை விநியோகிக்கிறோம். ஒவ்வொரு நிறமும் வெவ்வேறு அளவிலான ஆதரவைக் குறிக்கிறது.",
                    howStep2Title: "நிறத்தை ஸ்கேன் செய்யுங்கள்",
                    howStep2Desc: "உங்கள் அட்டையை விற்பனை இயந்திரத்தின் ஸ்கேனரில் காட்டினால் போதும். எங்கள் அமைப்பு உடனடியாக நிறத்தை அடையாளம் கண்டு தள்ளுபடியைப் பயன்படுத்தும்.",
                    howStep3Title: "உங்கள் தள்ளுபடியைப் பெறுங்கள்",
                    howStep3Desc: "உங்கள் தள்ளுபடி தாராளமான நன்கொடையாளர்களால் நிதியளிக்கப்படுகிறது, இது அத்தியாவசியப் பொருட்களை மலிவு விலையில் வழங்குகிறது.",
                    impactTitle: "எங்கள் கூட்டுத் தாக்கம்",
                    impactSubtitle: "வெளிப்படைத்தன்மை நாங்கள் செய்வதன் மையத்தில் உள்ளது. உங்கள் பங்களிப்புகள் உண்மையான நேரத்தில் உறுதியான வித்தியாசத்தை ஏற்படுத்துவதை பாருங்கள்.",
                    impactFundsTitle: "மொத்த நிதி திரட்டப்பட்டது",
                    impactFundsDesc: "நாடு முழுவதும் உள்ள ஆயிரக்கணக்கான தாராளமான நன்கொடையாளர்களிடமிருந்து.",
                    impactPeopleTitle: "ஆதரவளிக்கப்பட்ட நபர்கள்",
                    impactPeopleDesc: "எங்கள் விற்பனை வலையமைப்பு மூலம் அத்தியாவசியப் பொருட்கள் வழங்கப்பட்டன.",
                    testimonialsTitle: "எங்கள் சமூகத்தின் கதைகள்",
                    testimonial1Text: "\"ஒரு மாணவராக, ஒவ்வொரு ரூபாயும் முக்கியம். ஃபேர்வென்ட் கார்டு ஒரு வரப்பிரசாதமாக உள்ளது, கவலைப்படாமல் தின்பண்டங்கள் மற்றும் அத்தியாவசியப் பொருட்களை வாங்க உதவுகிறது. யாரோ அக்கறை காட்டுகிறார்கள் என்று தோன்றுகிறது.\"",
                    testimonial1Name: "- அனன்யா, மும்பையிலிருந்து ஒரு மாணவர்",
                    testimonial2Text: "\"ஒரு நீண்ட நாள் வேலைக்குப் பிறகு, என் மகளுக்கு மலிவு விலையில் பானங்கள் மற்றும் சானிட்டரி பொருட்கள் கிடைப்பது ஒரு பெரிய நிம்மதி. உங்கள் ஆதரவுக்கு நன்றி, ஃபேர்வென்ட்.\"",
                    testimonial2Name: "- ராஜேஷ், டெல்லியிலிருந்து ஒரு தொழிலாளி",
                    testimonial3Text: "\"இந்தத் திட்டம் வழங்கும் கண்ணியம் அளவிட முடியாதது. நான் பிச்சை கேட்பது போல் உணராமல் என் குடும்பத்திற்கு அத்தியாவசியப் பொருட்களைப் பெறுவது எல்லா வித்தியாசத்தையும் ஏற்படுத்தியுள்ளது.\"",
                    testimonial3Name: "- பிரியா, சென்னையிலிருந்து ஒரு தாய்",
                    findTitle: "உங்களுக்கு அருகிலுள்ள ஒரு ஃபேர்வென்ட் இயந்திரத்தைக் கண்டறியவும்",
                    findSubtitle: "அருகிலுள்ள இயந்திரத்தைக் கண்டறிந்து திசைகளைப் பெற உங்கள் பகுதி அல்லது நகரத்தை உள்ளிடவும்.",
                    findPlaceholder: "எ.கா., 'மும்பை' அல்லது 'கன்னாட் பிளேஸ், டெல்லி'",
                    findBtnSearch: "தேடு",
                    donateTitle: "எங்கள் பயணத்தை ஆதரிக்கவும்",
                    donateSubtitle: "உங்கள் பங்களிப்பு நாங்கள் வழங்கும் தள்ளுபடிகளுக்கு நேரடியாக நிதியளிக்கிறது. ஒவ்வொரு நன்கொடையும் தேவைப்படுபவர் கண்ணியத்துடன் அத்தியாவசியப் பொருட்களை அணுக உதவுகிறது.",
                    donateLabelName: "முழு பெயர்",
                    donatePlaceholderName: "பிரியா சர்மா",
                    donateErrorName: "உங்கள் முழுப் பெயரை உள்ளிடவும்.",
                    donateLabelEmail: "மின்னஞ்சல் முகவரி",
                    donatePlaceholderEmail: "you@example.com",
                    donateErrorEmail: "சரியான மின்னஞ்சலை உள்ளிடவும்.",
                    donateSelectAmount: "ஒரு தொகையைத் தேர்ந்தெடுக்கவும்",
                    donateCustomAmount: "அல்லது ஒரு விருப்பத் தொகையை உள்ளிடவும்",
                    donateErrorAmount: "சரியான தொகையைத் தேர்ந்தெடுக்கவும் அல்லது உள்ளிடவும்.",
                    donateCaptchaLabel: "நீங்கள் மனிதர் என்பதைச் சரிபார்க்கவும்",
                    donateCaptchaPlaceholder: "படத்திலிருந்து உரையை உள்ளிடவும்",
                    donateErrorCaptcha: "தவறான கேப்ட்சா. மீண்டும் முயற்சிக்கவும்.",
                    donateBtnSecure: "பாதுகாப்பாக நன்கொடையளிக்கவும்",
                    footerDesc: "சமூகத்தால் இயக்கப்படும் தள்ளுபடிகள் மூலம் அத்தியாவசியப் பொருட்களுக்கான நியாயமான அணுகல்.",
                    footerQuickLinks: "விரைவு இணைப்புகள்",
                    footerLinkHow: "எப்படி செயல்படுகிறது",
                    footerLinkFind: "இயந்திரத்தைக் கண்டறியவும்",
                    footerLinkDonate: "நன்கொடையளிக்கவும்",
                    footerLinkImpact: "எங்கள் தாக்கம்",
                    footerContact: "தொடர்பு",
                    footerLocation: "பெங்களூரு, இந்தியா",
                    footerUpdates: "தாக்கப் புதுப்பிப்புகளைப் பெறுங்கள்",
                    footerEmailPlaceholder: "your@email.com",
                    footerSubscribe: "சந்தா சேர்",
                    footerTagNGO: "பதிவுசெய்யப்பட்ட தன்னார்வ தொண்டு நிறுவனம்",
                    footerTagTransparent: "100% வெளிப்படையானது",
                    footerRights: "© 2025 ஃபேர்வென்ட். அனைத்து உரிமைகளும் பாதுகாக்கப்பட்டவை.",
                    footerSlogan: "அத்தியாவசியப் பொருட்களை அனைவருக்கும் கிடைக்கச் செய்தல்.",
                    modalThankYou: "நன்றி!",
                    modalMessage: "உங்கள் தாராளமான நன்கொடை ஒரு உண்மையான மாற்றத்தை ஏற்படுத்தும்.",
                    modalClose: "மூடு",
                }
            };

            const languageModal = document.getElementById('language-modal');
            const langSelectButtons = document.querySelectorAll('.lang-select-btn');
            
            const settingsButton = document.getElementById('settings-button');
            const settingsDropdown = document.getElementById('settings-dropdown');
            
            const themeLightBtn = document.getElementById('theme-light-btn');
            const themeDarkBtn = document.getElementById('theme-dark-btn');


            const setLanguage = (lang) => {
                localStorage.setItem('language', lang);
                document.documentElement.lang = lang;
                
                document.querySelectorAll('[data-key]').forEach(elem => {
                    const key = elem.getAttribute('data-key');
                    if (translations[lang] && translations[lang][key]) {
                        elem.innerText = translations[lang][key];
                    }
                });

                document.querySelectorAll('[data-key-placeholder]').forEach(elem => {
                    const key = elem.getAttribute('data-key-placeholder');
                    if (translations[lang] && translations[lang][key]) {
                        elem.placeholder = translations[lang][key];
                    }
                });
            };

            langSelectButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const selectedLang = button.getAttribute('data-lang');
                    setLanguage(selectedLang);
                    languageModal.classList.add('hidden');
                    settingsDropdown.classList.add('hidden');
                });
            });

            settingsButton.addEventListener('click', () => {
                settingsDropdown.classList.toggle('hidden');
            });
            
            // Close dropdown if clicked outside
            document.addEventListener('click', (e) => {
                if (settingsButton && !settingsButton.contains(e.target) && settingsDropdown && !settingsDropdown.contains(e.target)) {
                    settingsDropdown.classList.add('hidden');
                }
            });

            const savedLang = localStorage.getItem('language');
            if (savedLang) {
                setLanguage(savedLang);
            } else {
                languageModal.classList.remove('hidden');
            }


            // --- Header Scroll Effect ---
            const header = document.querySelector('header');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 10) {
                    header.classList.add('header-scrolled');
                } else {
                    header.classList.remove('header-scrolled');
                }
            });

            // --- Theme Toggler ---
            const setTheme = (theme) => {
                 if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                } else {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                }
            };

            themeLightBtn.addEventListener('click', () => {
                setTheme('light');
                settingsDropdown.classList.add('hidden');
            });

            themeDarkBtn.addEventListener('click', () => {
                setTheme('dark');
                 settingsDropdown.classList.add('hidden');
            });
            
            if (localStorage.getItem('theme') === 'dark') {
                setTheme('dark');
            } else {
                setTheme('light');
            }
            

            // --- Mobile Menu Toggle ---
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });


            // --- Map Initialization ---
            const map = L.map('map').setView([20.5937, 78.9629], 5);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            }).addTo(map);

            // --- Vending Machine Data ---
            const vendingMachines = [
                { name: 'Connaught Place', address: 'Inner Circle, New Delhi', coords: [28.6330, 77.2193] },
                { name: 'India Gate', address: 'Rajpath, New Delhi', coords: [28.6129, 77.2295] },
                { name: 'Gateway of India', address: 'Apollo Bandar, Colaba, Mumbai', coords: [18.9220, 72.8347] },
                { name: 'Juhu Beach', address: 'Juhu Tara Road, Mumbai', coords: [19.0886, 72.8265] },
                { name: 'Howrah Bridge', address: 'Strand Road, Kolkata', coords: [22.5852, 88.3458] },
                { name: 'Park Street', address: 'Mother Teresa Sarani, Kolkata', coords: [22.5534, 88.3529] },
                { name: 'Vengadamangalam Center', address: 'Mambakkam Main Rd, Chennai', coords: [12.8596, 80.1983] },
                { name: 'T. Nagar Market', address: 'Thyagaraya Nagar, Chennai', coords: [13.0402, 80.2323] },
                { name: 'Charminar', address: 'Char Kaman, Ghansi Bazaar, Hyderabad', coords: [17.3616, 78.4747] },
                { name: 'HITEC City', address: 'Madhapur, Hyderabad', coords: [17.4475, 78.3762] },
                { name: 'Koramangala', address: '80 Feet Road, Bengaluru', coords: [12.9352, 77.6245] },
                { name: 'MG Road', address: 'Mahatma Gandhi Road, Bengaluru', coords: [12.9756, 77.6068] },
                { name: 'Sabarmati Ashram', address: 'Gandhi Smarak Sangrahalaya, Ahmedabad', coords: [23.0608, 72.5805] },
                { name: 'Amer Fort', address: 'Devisinghpura, Amer, Jaipur', coords: [26.9855, 75.8513] },
                { name: 'Sector 17 Plaza', address: 'City Center, Chandigarh', coords: [30.7415, 76.7762] }
            ];
            
            let markers = []; 
            let userMarker;

            function displayMarkers(machines) {
                markers.forEach(marker => marker.remove());
                markers = [];
                if (machines.length === 0) return;
                machines.forEach(machine => {
                    const marker = L.marker(machine.coords).addTo(map)
                        .bindPopup(`<b>${machine.name}</b><br>${machine.address}<br><a href="https://www.google.com/maps/dir/?api=1&destination=${machine.coords[0]},${machine.coords[1]}" target="_blank" class="text-indigo-600 font-semibold dark:text-indigo-400">Get Directions</a>`);
                    markers.push(marker);
                });
                if (machines.length > 0) {
                    const group = new L.featureGroup(markers);
                    map.fitBounds(group.getBounds().pad(0.2));
                }
            }
            
            displayMarkers(vendingMachines);
            
            // --- Search & Location Logic ---
            const searchBtn = document.getElementById('search-btn');
            const locationInput = document.getElementById('location-input');
            const searchStatus = document.getElementById('search-status');
            const findNearestBtn = document.getElementById('find-nearest-btn');
            const headerFindMachineBtnDesktop = document.getElementById('header-find-machine-btn-desktop');
            const headerFindMachineBtnMobile = document.getElementById('header-find-machine-btn-mobile');

            searchBtn.addEventListener('click', performSearch);
            locationInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') performSearch(); });

            function performSearch() {
                const query = locationInput.value.toLowerCase().trim();
                searchStatus.textContent = 'Searching...';
                if (!query) {
                    displayMarkers(vendingMachines);
                    map.setView([20.5937, 78.9629], 5);
                    searchStatus.textContent = 'Showing all available machines.';
                    return;
                }
                setTimeout(() => {
                    const results = vendingMachines.filter(m => m.name.toLowerCase().includes(query) || m.address.toLowerCase().includes(query));
                    if (results.length > 0) {
                        displayMarkers(results);
                        searchStatus.textContent = `Found ${results.length} machine(s).`;
                    } else {
                        displayMarkers([]);
                        searchStatus.textContent = 'No machines found for your search.';
                    }
                }, 500);
            }

            const handleFindNearestClick = (e) => {
                e.preventDefault();
                document.getElementById('find-machine').scrollIntoView({ behavior: 'smooth' });
                if (navigator.geolocation) {
                    searchStatus.textContent = 'Requesting your location...';
                    navigator.geolocation.getCurrentPosition(locationSuccess, locationError);
                } else {
                    searchStatus.textContent = 'Geolocation is not supported by your browser.';
                }
            };

            findNearestBtn.addEventListener('click', handleFindNearestClick);
            [headerFindMachineBtnDesktop, headerFindMachineBtnMobile].forEach(btn => {
                btn.addEventListener('click', handleFindNearestClick);
            });

            function locationSuccess(position) {
                const { latitude: userLat, longitude: userLon } = position.coords;
                map.setView([userLat, userLon], 14);
                if (userMarker) userMarker.remove();
                userMarker = L.marker([userLat, userLon], {
                    icon: L.icon({
                        iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png',
                        iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34],
                        shadowUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png',
                        shadowSize: [41, 41], className: 'user-location-marker' 
                    })
                }).addTo(map).bindPopup("<b>You are here</b>").openPopup();
                searchStatus.textContent = 'Location found! Searching for the nearest machine...';
                findAndShowNearest(userLat, userLon);
            }

            function locationError(error) {
                searchStatus.textContent = error.code === 1 ? "Location access denied. Please allow it in your browser settings." : "Could not determine your location.";
            }

            function findAndShowNearest(userLat, userLon) {
                let nearestMachine = vendingMachines.reduce((nearest, machine) => {
                    const distance = haversineDistance([userLat, userLon], machine.coords);
                    return distance < nearest.distance ? { ...machine, distance } : nearest;
                }, { distance: Infinity });

                if (nearestMachine.name) {
                    searchStatus.textContent = `The nearest machine is at ${nearestMachine.name} (${nearestMachine.distance.toFixed(2)} km away).`;
                    const nearestMarker = markers.find(m => m.getLatLng().equals(nearestMachine.coords));
                    if (nearestMarker) nearestMarker.openPopup();
                }
            }

            function haversineDistance(coords1, coords2) {
                const R = 6371, dLat = (coords2[0] - coords1[0]) * Math.PI / 180, dLon = (coords2[1] - coords1[1]) * Math.PI / 180;
                const a = Math.sin(dLat/2)**2 + Math.cos(coords1[0] * Math.PI/180) * Math.cos(coords2[0] * Math.PI/180) * Math.sin(dLon/2)**2;
                return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            }

            // --- Testimonial Slider ---
            const sliderTrack = document.getElementById('slider-track');
            const prevButton = document.getElementById('prev-slide');
            const nextButton = document.getElementById('next-slide');
            let currentSlide = 0;
            const slideCount = sliderTrack.children.length;

            function updateSlider() {
                sliderTrack.style.transform = `translateX(-${currentSlide * 100}%)`;
            }

            nextButton.addEventListener('click', () => {
                currentSlide = (currentSlide + 1) % slideCount;
                updateSlider();
            });

            prevButton.addEventListener('click', () => {
                currentSlide = (currentSlide - 1 + slideCount) % slideCount;
                updateSlider();
            });

            // --- Donation and CAPTCHA Logic ---
            const donationForm = document.getElementById('donation-form'), donorNameInput = document.getElementById('donor-name'), donorEmailInput = document.getElementById('donor-email'), customAmountInput = document.getElementById('custom-amount'), donationAmountBtns = document.querySelectorAll('.donation-amount-btn'), thankYouModal = document.getElementById('thank-you-modal'), modalContent = thankYouModal.querySelector('div'), closeModalBtn = document.getElementById('close-modal-btn'), thankYouMessage = document.getElementById('thank-you-message'), nameError = document.getElementById('name-error'), emailError = document.getElementById('email-error'), amountError = document.getElementById('amount-error'), captchaText = document.getElementById('captcha-text'), captchaInput = document.getElementById('captcha-input'), captchaError = document.getElementById('captcha-error'), refreshCaptchaBtn = document.getElementById('refresh-captcha');
            let currentCaptcha = '';

            function generateCaptcha() {
                const chars = 'ABCDEFGHJKMNPQRSTUVWXYZ23456789'; // Avoided confusing chars
                currentCaptcha = Array.from({length: 6}, () => chars.charAt(Math.floor(Math.random() * chars.length))).join('');
                captchaText.textContent = currentCaptcha;
            }

            refreshCaptchaBtn.addEventListener('click', generateCaptcha);
            
            donationAmountBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    donationAmountBtns.forEach(b => b.classList.remove('bg-indigo-100', 'dark:bg-indigo-900/50', 'ring-2', 'ring-indigo-300'));
                    btn.classList.add('bg-indigo-100', 'dark:bg-indigo-900/50', 'ring-2', 'ring-indigo-300');
                    customAmountInput.value = btn.dataset.amount;
                });
            });

            customAmountInput.addEventListener('input', () => donationAmountBtns.forEach(b => b.classList.remove('bg-indigo-100', 'dark:bg-indigo-900/50', 'ring-2', 'ring-indigo-300')));

            function showModal(generatedMessage) {
                thankYouMessage.textContent = generatedMessage;
                thankYouModal.classList.remove('hidden');
                setTimeout(() => modalContent.classList.remove('scale-95', 'opacity-0'), 10);
            }
            
            function hideModal() {
                 modalContent.classList.add('scale-95', 'opacity-0');
                 setTimeout(() => thankYouModal.classList.add('hidden'), 200);
            }
            
            donationForm.addEventListener('submit', async (e) => {
                e.preventDefault(); 
                let isValid = true;
                [nameError, emailError, amountError, captchaError].forEach(el => el.classList.add('hidden'));
                [donorNameInput, donorEmailInput, customAmountInput, captchaInput].forEach(el => el.classList.remove('border-red-500'));

                const name = donorNameInput.value.trim(), email = donorEmailInput.value.trim(), amount = parseFloat(customAmountInput.value);
                if (name === '') { isValid = false; donorNameInput.classList.add('border-red-500'); nameError.classList.remove('hidden'); }
                if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { isValid = false; donorEmailInput.classList.add('border-red-500'); emailError.classList.remove('hidden'); }
                if (isNaN(amount) || amount <= 0) { isValid = false; customAmountInput.classList.add('border-red-500'); amountError.classList.remove('hidden'); }
                if (captchaInput.value.trim().toLowerCase() !== currentCaptcha.toLowerCase()) {
                    isValid = false; captchaInput.classList.add('border-red-500'); captchaError.classList.remove('hidden');
                    generateCaptcha(); captchaInput.value = '';
                }
                
                if (isValid) {
                   const donateBtn = document.getElementById('donate-btn');
                   donateBtn.disabled = true;
                   donateBtn.innerHTML = `<svg class="animate-spin h-5 w-5 mr-3 inline-block" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Processing... ✨`;
                   
                   const lang = localStorage.getItem('language') || 'en';
                   const thankYouPrompt = {
                        en: `You are the voice of FairVend, a charity in India. Write a short, heartfelt, and personal thank you message to a donor named ${name.split(' ')[0]} who just donated ₹${amount}. Mention the positive impact of their contribution. Keep it under 50 words.`,
                        hi: `आप फेयरवेंड की आवाज हैं, जो भारत में एक चैरिटी है। ${name.split(' ')[0]} नामक एक दाता को एक छोटा, हार्दिक और व्यक्तिगत धन्यवाद संदेश लिखें, जिन्होंने अभी-अभी ₹${amount} का दान दिया है। उनके योगदान के सकारात्मक प्रभाव का उल्लेख करें। इसे 50 शब्दों से कम रखें।`,
                        ta: `நீங்கள் ஃபேர்வென்டின் குரல், இந்தியாவில் ஒரு தொண்டு நிறுவனம். ₹${amount} நன்கொடை அளித்த ${name.split(' ')[0]} என்ற நன்கொடையாளருக்கு ஒரு குறிய, இதயப்பூர்வமான மற்றும் தனிப்பட்ட நன்றி செய்தியை எழுதுங்கள். அவர்களின் பங்களிப்பின் நேர்மறையான தாக்கத்தைக் குறிப்பிடவும். அதை 50 வார்த்தைகளுக்குள் வைத்திருங்கள்.`
                   }[lang];

                   const thankYouNote = "Thank you for your generous donation!"; // Placeholder

                   showModal(thankYouNote);
                   donationForm.reset();
                   donationAmountBtns.forEach(b => b.classList.remove('bg-indigo-100', 'dark:bg-indigo-900/50', 'ring-2', 'ring-indigo-300'));
                   generateCaptcha();
                   donateBtn.disabled = false;
                   donateBtn.innerHTML = translations[lang].donateBtnSecure;
                }
            });

            closeModalBtn.addEventListener('click', hideModal);
            thankYouModal.addEventListener('click', (e) => { if (e.target === thankYouModal) hideModal(); });

            generateCaptcha();
        });
    </script>

</body>
</html>
